<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.e4314e39253356f048be.css">code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}

/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}h1{font-size:2em;margin:.67em 0}a{background-color:transparent}small{font-size:80%}img{border-style:none}h1,p{margin:0}html{font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}*,:after,:before{box-sizing:border-box;border:0 solid #e2e8f0}img{border-style:solid}h1{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}img,svg{display:block;vertical-align:middle}img{max-width:100%;height:auto}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}.space-x-5>:not(template)~:not(template){--space-x-reverse:0;margin-right:calc(1.25rem*var(--space-x-reverse));margin-left:calc(1.25rem*(1 - var(--space-x-reverse)))}.bg-white{--bg-opacity:1;background-color:#fff;background-color:rgba(255,255,255,var(--bg-opacity))}.bg-gray-300{--bg-opacity:1;background-color:#e2e8f0;background-color:rgba(226,232,240,var(--bg-opacity))}.hover\:bg-gray-400:hover{--bg-opacity:1;background-color:#cbd5e0;background-color:rgba(203,213,224,var(--bg-opacity))}.rounded{border-radius:.25rem}.flex{display:flex}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.justify-start{justify-content:flex-start}.justify-between{justify-content:space-between}.font-bold{font-weight:700}.h-8{height:2rem}.text-xs{font-size:.75rem}.text-sm{font-size:.875rem}.text-lg{font-size:1.125rem}.text-xl{font-size:1.25rem}.text-2xl{font-size:1.5rem}.text-4xl{font-size:2.25rem}.my-4{margin-top:1rem;margin-bottom:1rem}.mx-auto{margin-left:auto;margin-right:auto}.mt-1{margin-top:.25rem}.p-6{padding:1.5rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.px-4{padding-left:1rem;padding-right:1rem}.px-5{padding-left:1.25rem;padding-right:1.25rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.pt-0{padding-top:0}.pb-3{padding-bottom:.75rem}.pl-3{padding-left:.75rem}.pb-5{padding-bottom:1.25rem}.pt-6{padding-top:1.5rem}.pb-6{padding-bottom:1.5rem}.pb-8{padding-bottom:2rem}.shadow{box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06)}.hover\:shadow-md:hover{box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06)}.fill-current{fill:currentColor}.text-left{text-align:left}.text-gray-600{--text-opacity:1;color:#718096;color:rgba(113,128,150,var(--text-opacity))}.text-gray-700{--text-opacity:1;color:#4a5568;color:rgba(74,85,104,var(--text-opacity))}.text-pink-600{--text-opacity:1;color:#d53f8c;color:rgba(213,63,140,var(--text-opacity))}.hover\:text-gray-700:hover{--text-opacity:1;color:#4a5568;color:rgba(74,85,104,var(--text-opacity))}.hover\:text-pink-600:hover{--text-opacity:1;color:#d53f8c;color:rgba(213,63,140,var(--text-opacity))}.uppercase{text-transform:uppercase}.capitalize{text-transform:capitalize}.no-underline{text-decoration:none}.hover\:underline:hover{text-decoration:underline}.w-8{width:2rem}.w-1\/2{width:50%}.w-full{width:100%}@keyframes spin{to{transform:rotate(1turn)}}@keyframes ping{75%,to{transform:scale(2);opacity:0}}@keyframes pulse{50%{opacity:.5}}@keyframes bounce{0%,to{transform:translateY(-25%);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;animation-timing-function:cubic-bezier(0,0,.2,1)}}@media (min-width:768px){.md\:text-base{font-size:1rem}.md\:text-xl{font-size:1.25rem}.md\:text-5xl{font-size:3rem}.md\:pt-2{padding-top:.5rem}.md\:w-2\/3{width:66.666667%}}.nunito{font-family:Nunito,sans-serif}p{line-height:2}h2,p{margin-bottom:1.5rem}h2{font-size:1.5rem;margin-top:.5rem}h2,h3{font-weight:700}h3{font-size:1.25rem;margin-top:1rem;margin-bottom:1.25rem}h4{font-size:1.125rem;font-weight:700}code{--text-opacity:1;color:#ed64a6;color:rgba(237,100,166,var(--text-opacity));--bg-opacity:1;background-color:#fff5f7;background-color:rgba(255,245,247,var(--bg-opacity));border-radius:.375rem;padding:.25rem .5rem}pre code{padding-left:0;padding-right:0}a{color:#ed64a6;color:rgba(237,100,166,var(--text-opacity));text-decoration:underline}a,blockquote{--text-opacity:1}blockquote{--border-opacity:1;border-color:#ed64a6;border-color:rgba(237,100,166,var(--border-opacity));border-left-width:4px;padding-left:1rem;margin-bottom:.75rem;color:#4a5568;color:rgba(74,85,104,var(--text-opacity))}ul{list-style-type:disc;margin-bottom:.5rem}ol,ul{list-style-position:inside}ol{list-style-type:decimal}</style><meta name="generator" content="Gatsby 2.18.17"/><title data-react-helmet="true">Unlikenesses</title><meta data-react-helmet="true" name="description" content="A PHP Developer"/><link href="https://fonts.googleapis.com/css?family=Nunito:400,700" rel="stylesheet"/><link as="script" rel="preload" href="/styles-9a353c6f1161ef8c88fb.js"/><link as="script" rel="preload" href="/component---src-templates-post-js-a30e348d709b8e74500d.js"/><link as="script" rel="preload" href="/commons-49bb98a60abcd33caf3c.js"/><link as="script" rel="preload" href="/app-3d34126c26312025b100.js"/><link as="script" rel="preload" href="/webpack-runtime-edcc8e351786e4f5fe24.js"/><link as="fetch" rel="preload" href="/page-data\2018-04-27-laracasts-lessons-part-2\page-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="nunito"><div class="container w-full md:w-2/3 mx-auto flex flex-wrap py-6"><header class="pl-3 pb-6"><a class="font-bold text-gray-700 uppercase hover:text-gray-700 text-xl md:text-5xl no-underline" href="/">Unlikenesses <span class="text-xs md:text-xl">A PHP Developer</span></a><nav class="flex space-x-5 mt-1"><a class="no-underline text-gray-600 hover:text-pink-600" href="https://twitter.com/unlikenesses" target="_blank" rel="noopener noreferrer"><svg role="img" class="w-8 h-8 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>Twitter</title><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"></path></svg></a><a class="no-underline text-gray-600 hover:text-pink-600" href="https://github.com/unlikenesses" target="_blank" rel="noopener noreferrer"><svg role="img" class="w-8 h-8 fill-current" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="no-underline text-gray-600 hover:text-pink-600" href="http://codepen.io/unlikenesses/" target="_blank" rel="noopener noreferrer"><svg role="img" class="w-8 h-8 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>CodePen</title><path d="M18.144 13.067v-2.134L16.55 12zm1.276 1.194a.628.628 0 01-.006.083l-.005.028-.011.053-.01.031c-.005.016-.01.031-.017.047l-.014.03a.78.78 0 01-.021.043l-.019.03a.57.57 0 01-.08.1l-.026.025a.602.602 0 01-.036.03l-.029.022-.01.008-6.782 4.522a.637.637 0 01-.708 0L4.864 14.79l-.01-.008a.599.599 0 01-.065-.052l-.026-.025-.032-.034-.021-.028a.588.588 0 01-.067-.11l-.014-.031a.644.644 0 01-.017-.047l-.01-.03c-.004-.018-.008-.036-.01-.054l-.006-.028a.628.628 0 01-.006-.083V9.739c0-.028.002-.055.006-.083l.005-.027.011-.054.01-.03a.574.574 0 01.12-.217l.031-.034.026-.025a.62.62 0 01.065-.052l.01-.008 6.782-4.521a.638.638 0 01.708 0l6.782 4.521.01.008.03.022.035.03c.01.008.017.016.026.025a.545.545 0 01.08.1l.019.03a.633.633 0 01.021.043l.014.03c.007.016.012.032.017.047l.01.031c.004.018.008.036.01.054l.006.027a.619.619 0 01.006.083zM12 0C5.373 0 0 5.372 0 12 0 18.627 5.373 24 12 24c6.628 0 12-5.372 12-12 0-6.627-5.372-12-12-12m0 10.492L9.745 12 12 13.51 14.255 12zm.638 4.124v2.975l4.996-3.33-2.232-1.493zm-6.272-.356l4.996 3.33v-2.974l-2.764-1.849zm11.268-4.52l-4.996-3.33v2.974l2.764 1.85zm-6.272-.356V6.41L6.366 9.74l2.232 1.493zm-5.506 1.549v2.134L7.45 12Z"></path></svg></a></nav></header><section class="w-full flex flex-col items-center px-3"><article class="w-full flex flex-col my-4"><div class="bg-white flex flex-col justify-start py-6"><h1 class="text-4xl font-bold text-gray-700 capitalize">Lessons from Laracasts, Part 2</h1><span class="text-sm pb-8 text-gray-600">27 April, 2018</span><div class="text-gray-700 text-lg"><p>This is part 2 of my collection of tips I've taken from <a href="https://laracasts.com/series/lets-build-a-forum-with-laravel">Let's Build a Forum with Laravel and TDD</a>, the mega-tutorial (102 lessons) by Jeffrey Way on his <a href="https://laracasts.com">Laracasts</a> site. <a href="http://unlikenesses.com/2018-03-24-laracasts-lessons/">Part 1 is here.</a> This post contains 51 tips, covering lessons 43-102.</p>
<h4><a name="51"></a> 51.</h4>
<p>The artisan <a href="https://laravel.com/docs/5.6/notifications#database-prerequisites"><code>notifications:table</code></a> command creates a migration for a table to hold database notifications. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/43">Source</a>]</p>
<h4><a name="52"></a> 52.</h4>
<p>The <a href="https://laravel.com/docs/5.6/helpers#method-tap"><code>tap</code> helper</a>, <a href="https://medium.com/@taylorotwell/tap-tap-tap-1fc6fc1f93a6">inspired by Ruby</a> can help refactoring by removing temporary variables. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/44">Source</a>]</p>
<h4><a name="53"></a> 53.</h4>
<p>Use the <a href="https://laravel.com/docs/5.6/events"><code>artisan event:generate</code> command</a> to create events and listeners. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/46">Source</a>]</p>
<h4><a name="54"></a> 54.</h4>
<p>The <a href="https://laravel.com/docs/5.6/mocking#notification-fake"><code>Notification::fake</code> and <code>Notification:assertSentTo</code> methods</a> allow you to test notifications without triggering their usual behaviour. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/47">Source</a>]</p>
<h4><a name="55"></a> 55.</h4>
<p>JW uses <code>[identifier]CacheKey</code> as a method to supply a single point of truth for a cache's key. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/48">Source</a>]</p>
<h4><a name="56"></a> 56.</h4>
<p>An example of using Laravel's container when refactoring spam inspection methods to their own classes: [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/50">Source</a>], around 06:35.</p>
<h4><a name="57"></a> 57.</h4>
<p>The <a href="https://laravel.com/docs/5.6/helpers#method-resolve"><code>resolve</code> method</a> resolves a class out of Laravel's container. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/51">Source</a>]</p>
<h4><a name="58"></a> 58.</h4>
<p>JW uses a <a href="https://httpstatuses.com/422"><code>422 Unprocessable Entity</code></a> HTTP status code when catching exceptions thrown during AJAX calls. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/52">Source</a>]</p>
<h4><a name="59"></a> 59.</h4>
<p>Artisan's <a href="https://laravel.com/docs/5.6/validation#custom-validation-rules"><code>make:rule</code> command</a> will scaffold the necessary code for custom validation rules. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/53">Source</a>]</p>
<h4><a name="60"></a> 60.</h4>
<p>The <a href="https://laravel.com/docs/5.6/routing#rate-limiting"><code>throttle</code> middleware</a> rate limits access to Laravel routes. But JW notes that failing validation would make this solution problematic. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/54">Source</a>]</p>
<h4><a name="61"></a> 61.</h4>
<p>Use <a href="https://laravel.com/docs/5.6/validation#form-request-validation"><code>form requests</code></a> for more complex form situations requiring authorization and validation. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/55">Source</a>]</p>
<h4><a name="62"></a> 62.</h4>
<p>The <a href="https://laravel.com/docs/5.6/collections#creating-collections"><code>collect</code> helper</a> converts arrays to collections. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/57">Source</a>]</p>
<h4><a name="63"></a> 63.</h4>
<p>When the <a href="https://laravel.com/docs/5.6/collections#method-filter"><code>filter</code> method</a> is called without an argument on a collection it removes falsey values. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/57">Source</a>]</p>
<h4><a name="64"></a> 64.</h4>
<p>In the tutorial, JW uses the <a href="https://github.com/ichord/At.js">At.js</a> library to add mentions autocomplete functionality to the forum. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/60">Source</a>]</p>
<h4><a name="65"></a> 65.</h4>
<p>Use the <a href="https://laravel.com/docs/5.6/collections#method-pluck"><code>pluck</code> method</a> to get the values for a given key from a collection. JW uses it to return values from a collection retrieved by Eloquent:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token keyword">return</span> User<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'LIKE'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'$search%'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">take</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">pluck</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>[<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/61">Source</a>]</p>
<h4><a name="66"></a> 66.</h4>
<p>One way to grab CSS from an NPM package: use the <a href="https://github.com/JeffreyWay/laravel-mix/blob/master/docs/copying-files.md"><code>copy</code> method</a> in your <code>webpack.mix.js</code> file:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">mix<span class="token punctuation">.</span><span class="token function">js</span><span class="token punctuation">(</span><span class="token string">'resources/assets/js/app.js'</span><span class="token punctuation">,</span> <span class="token string">'public.js'</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">sass</span><span class="token punctuation">(</span><span class="token string">'resources/assets/sass/app.scss'</span><span class="token punctuation">,</span> <span class="token string">'public.css'</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span><span class="token string">'node_modules/[path_to_src_css_file]'</span><span class="token punctuation">,</span> <span class="token string">'[path_to_dest_css_file]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>[<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/61">Source</a>]</p>
<h4><a name="67"></a> 67.</h4>
<p>Another way to grab a package's CSS: import it in your main <code>scss</code> file. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/61">Source</a>]</p>
<h4><a name="68"></a> 68.</h4>
<p>Another way to grab a package's CSS: just manually copy it to your <code>css</code> directory. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/61">Source</a>]</p>
<h4><a name="69"></a> 69.</h4>
<p>To import CSS files depending on the view, use a <code>@yield('head')</code> directive, then in the template you want to load this file, include the <code>link</code> tag in a <code>@section('head')</code> directive. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/61">Source</a>]</p>
<h4><a name="70"></a> 70.</h4>
<p>The <a href="https://laravel.com/docs/5.6/http-tests#testing-file-uploads"><code>UploadedFile::fake</code> method</a> allows you to fake a file (or image) for testing:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php">UploadedFile<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">fake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">image</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'filename.jpg'</span><span class="token punctuation">,</span> <span class="token variable">$width</span><span class="token punctuation">,</span> <span class="token variable">$height</span><span class="token punctuation">)</span></code></pre></div>
<p>[<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/63">Source</a>]</p>
<h4><a name="71"></a> 71.</h4>
<p>The <a href="https://laravel.com/docs/5.6/mocking#storage-fake"><code>Storage::fake</code> method</a> will create a fake storage disk for testing. E.g.:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php">Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">fake</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">json</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'POST'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'api/upload'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
  <span class="token single-quoted-string string">'file'</span> <span class="token operator">=</span><span class="token operator">></span> UploadedFile<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">fake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">image</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'filename.jpg'</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">disk</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'public'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">assertExists</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'filename.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>[<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/63">Source</a>]</p>
<h4><a name="72"></a> 72.</h4>
<p><a href="https://laravel.com/api/5.6/Illuminate/Http/FileHelpers.html#method_hashName"><code>hashName</code></a> returns the filename for an uploaded file. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/63">Source</a>]</p>
<h4><a name="73"></a> 73.</h4>
<p>Compare Eloquent models with <a href="https://laravel.com/api/5.6/Illuminate/Database/Eloquent/Model.html#method_is"><code>is</code></a> and <a href="https://laravel.com/api/5.6/Illuminate/Database/Eloquent/Model.html#method_isNot"><code>isNot</code></a>. [From the comments to <a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/64">Source</a>]</p>
<h4><a name="74"></a> 74.</h4>
<p>How did I not know about this? The <code>input</code> tag <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-accept">has an <code>accept</code> attribute</a> which takes a comma-separated list of content type specifiers, either file extensions, MIME types or <code>audio/*</code>, <code>video/*</code> or <code>image/*</code>. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/65">Source</a>]</p>
<h4><a name="76"></a> 76.</h4>
<p>Any native attribute (e.g. <code>name</code> on a form element) specified on a Vue component instance will be passed to that component, when the root element of the component is a single form element. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/65">Source</a>]</p>
<h4><a name="77"></a> 77.</h4>
<p>As of PHP 7, you can use the <a href="http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.coalesce"><code>null coalescing operator</code></a> to assign a default value. E.g.:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token keyword">return</span> Redis<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">cacheKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span><span class="token operator">?</span> <span class="token number">0</span><span class="token punctuation">;</span></code></pre></div>
<p>[<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/68">Source</a>]</p>
<h4><a name="78"></a> 78.</h4>
<p>The steps to create a custom <a href="https://laravel.com/docs/5.6/middleware">middleware</a>:</p>
<ol>
<li><code>php artisan make:middleware NameOfMiddleware</code></li>
<li>In the <code>handle</code> method of the new middleware write the code to filter access to the route:</li>
</ol>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">confirmed</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/threads'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<ol start="3">
<li>List the middleware class in <code>app/Http/Kernel.php</code>:</li>
</ol>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token keyword">protected</span> <span class="token variable">$routeMiddleware</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token single-quoted-string string">'name-of-middleware'</span> <span class="token operator">=</span><span class="token operator">></span> NameOfMiddleware<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre></div>
<ol start="4">
<li>Attach the middleware to a route:</li>
</ol>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php">Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'threads'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'ThreadsController@store'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name-of-middleware'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>[<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/71">Source</a>]</p>
<h4><a name="79"></a> 79.</h4>
<p>To simulate a new user registration in a test you can call the event that's called by the <code>register</code> method in the <code>RegistersUsers</code> trait:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token function">event</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Registered</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>[<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/72">Source</a>]</p>
<h4><a name="80"></a> 80.</h4>
<p>Faking emails while testing can be done with the <a href="https://laravel.com/docs/5.6/mocking#mail-fake"><code>Mail::fake</code></a> method.</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php">Mail<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">fake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span>test code here<span class="token punctuation">]</span>

Mail<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">assertSent</span><span class="token punctuation">(</span>MailableName<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>[<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/72">Source</a>]</p>
<h4><a name="81"></a> 81.</h4>
<p>Eloquent models have a <a href="https://laravel.com/docs/5.6/eloquent-mutators#attribute-casting"><code>$cast</code> property</a> that, in the words of the docs, "provides a convenient method of converting attributes to common data types". Useful, for example, for converting <code>0</code> or <code>1</code> to booleans. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/72">Source</a>]</p>
<h4><a name="82"></a> 82.</h4>
<p>The <a href="https://laravel.com/api/5.6/Illuminate/Database/Eloquent/Builder.html#method_forceCreate"><code>forceCreate</code> Eloquent method</a> is like <code>create</code> except that it ignores any mass-assignment rules. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/72">Source</a>]</p>
<h4><a name="83"></a> 83.</h4>
<p>You can define modifications of your model factories with <a href="https://laravel.com/docs/5.6/database-testing#factory-states">the <code>state</code> method</a>. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/73">Source</a>]</p>
<h4><a name="84"></a> 84.</h4>
<p>Laravel's <a href="https://laravel.com/docs/5.6/helpers#method-str-slug"><code>str-slug</code> helper</a> converts strings to slugs. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/75">Source</a>]</p>
<h4><a name="85"></a> 85.</h4>
<p>Use the query builder's <a href="https://laravel.com/docs/5.6/queries#aggregates"><code>max</code> method</a> to return the highest value of a given model field. E.g.:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token variable">$max</span> <span class="token operator">=</span> Book<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">wherePublisher</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foobar'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">max</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'pages'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>[<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/76">Source</a>]</p>
<h4><a name="86"></a> 86.</h4>
<p>As of PHP 7, <a href="http://php.net/manual/en/language.types.string.php#language.types.string.substr">you can access characters in strings</a> using an offset in array-type brackets. To access the final character of string, use <code>-1</code>:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token variable">$final</span> <span class="token operator">=</span> <span class="token variable">$slug</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre></div>
<p>[<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/76">Source</a>]</p>
<h4><a name="87"></a> 87.</h4>
<p>Use the <a href="https://laravel.com/docs/5.6/helpers#method-abort-if"><code>abort_if</code> helper</a> to throw an exception under a given boolean condition. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/78">Source</a>]</p>
<h4><a name="88"></a> 88.</h4>
<p>You can render an array as JSON in a blade template with the <a href="https://laravel.com/docs/5.6/blade#displaying-data"><code>@json</code> directive</a>. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/81">Source</a>]</p>
<h4><a name="89"></a> 89.</h4>
<p>MySQL has a <a href="https://dev.mysql.com/doc/refman/8.0/en/create-table-foreign-keys.html#foreign-keys-referential-actions"><code>SET NULL</code> action</a> that can be set for <code>UPDATE</code> and <code>DELETE</code> operations on a foreign key. In a Laravel migration, this reads as:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">foreign</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user_id'</span><span class="token punctuation">)</span>
  <span class="token operator">-</span><span class="token operator">></span><span class="token function">references</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">)</span>
  <span class="token operator">-</span><span class="token operator">></span><span class="token function">on</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span>
  <span class="token operator">-</span><span class="token operator">></span><span class="token function">onDelete</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'set null'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>[<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/82">Source</a>]</p>
<h4><a name="90"></a> 90.</h4>
<p>If you get a "Cannot add foreign key constraint" error when migrating, that can be because the migration where you're setting the foreign key has a timestamp earlier than the migration for the table you're referencing in your foreign key. JW fixes this by manually altering the timestamp of the migration to a later date. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/82">Source</a>]</p>
<h4><a name="91"></a> 91.</h4>
<p>A potential error when using foreign keys and testing with an SQLite database: <a href="https://www.sqlite.org/foreignkeys.html#fk_enable">foreign keys are not enabled by default</a>. To enable them, in your test include:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">statement</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'PRAGMA foreign_keys = ON'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>[<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/82">Source</a>]</p>
<p>NB. A comment to this video notes that instead you can use:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php">Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">enableForeignKeyConstraints</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<h4><a name="92"></a> 92.</h4>
<p>Use double negation (<code>!!</code>) to cast variables to a boolean. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/85">Source</a>]</p>
<h4><a name="93"></a> 93.</h4>
<p>Use the <a href="https://laravel.com/docs/5.6/blade#php"><code>@php</code> directive</a> to embed PHP code in Blade views. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/88">Source</a>]</p>
<h4><a name="94"></a> 94.</h4>
<p>It is recommended not to reference the <code>.env</code> file within the application. Instead, pull environment variables from a configuration file (e.g. <code>config/services.php</code>) which itself pulls from <code>.env</code>. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/89">Source</a>]</p>
<h4><a name="95"></a> 95.</h4>
<p>Instead of getting the remote IP address with <code>$_SERVER['REMOTE_ADDR']</code>, use <a href="https://laravel.com/api/5.6/Illuminate/Http/Request.html#method_ip"><code>request()->ip()</code></a>. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/90">Source</a>]</p>
<h4><a name="96"></a> 96.</h4>
<p>Use <a href="https://laravel.com/api/5.3/Illuminate/Foundation/Application.html#method_runningUnitTests"><code>app()->runningUnitTests()</code></a> for behaviour conditional on whether you're running your tests. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/90">Source</a>]</p>
<h4><a name="97"></a> 97.</h4>
<p>As of Laravel 5.5, validation returns the validated data, which makes it possible to create concise flows like this:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token variable">$thread</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">update</span><span class="token punctuation">(</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token single-quoted-string string">'required'</span><span class="token punctuation">,</span>
  <span class="token single-quoted-string string">'body'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token single-quoted-string string">'required'</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>[<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/91">Source</a>]</p>
<h4><a name="98"></a> 98.</h4>
<p>Using an external search service like Algolia can slow down tests. To circumvent this, set <code>SCOUT_DRIVER</code> to <code>null</code> in your test environment variables (<code>phpunit.xml</code>). For tests where you want to use the search service, you can update the config for that specific test:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'scout.driver'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token single-quoted-string string">'algolia'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>[<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/95">Source</a>]</p>
<h4><a name="99"></a> 99.</h4>
<p>For tests which use a search service, remember to remove any created elements at the end of the test to avoid false positives, with the <a href="https://laravel.com/docs/5.6/scout#removing-records"><code>unsearchable</code> method</a> on a collection. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/95">Source</a>]</p>
<h4><a name="100"></a> 100.</h4>
<p>Specify the data sent to your search service by <a href="https://laravel.com/docs/5.6/scout#configuring-searchable-data">overriding <code>toSearchableArray</code></a> in your model. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/97">Source</a>]</p>
<h4><a name="101"></a> 101.</h4>
<p>Any property passed to a Vue component that isn't accepted as a property in that component, will be assigned to the top-level element in that component's template. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/100">Source</a>]</p>
<h4><a name="102"></a> 102.</h4>
<p>When you want to display sanitized data in a Vue (or other front-end framework) component, and you want to sanitize it with PHP, you can do it with a <a href="https://laravel.com/docs/5.6/eloquent-mutators#accessors-and-mutators">custom accessor</a>. [<a href="https://laracasts.com/series/lets-build-a-forum-with-laravel/episodes/101">Source</a>]</p></div></div></article><div class="w-full flex pt-6"><a class="w-1/2 bg-white shadow hover:shadow-md text-left p-6 no-underline" href="/2018-03-24-laracasts-lessons/"><p class="text-lg text-gray-700 font-bold flex items-center">Previous<!-- -->:</p><p class="pt-0 md:pt-2 capitalize">Lessons from Laracasts, Part 1<!-- --> <small>24 March, 2018</small></p></a><a class="w-1/2 bg-white shadow hover:shadow-md text-left p-6 no-underline" href="/2019-03-15-upgrading-gatsby/"><p class="text-lg text-gray-700 font-bold flex items-center">Next<!-- -->:</p><p class="pt-0 md:pt-2 capitalize">Upgrading Gatsby<!-- --> <small>15 March, 2019</small></p></a></div></section></div><footer class="container text-sm md:text-base w-full md:w-2/3 mx-auto flex flex-wrap py-4 px-5 justify-between text-gray-600"><p>Unlikenesses</p><p>Built with <a href="https://www.gatsbyjs.org" target="_blank">GatsbyJS</a> and <a href="https://tailwindcss.com" target="_blank">Tailwind CSS</a></p></footer></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2018-04-27-laracasts-lessons-part-2/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-3d34126c26312025b100.js"],"component---src-templates-index-js":["/component---src-templates-index-js-ef7da5a2960572cc5911.js"],"component---src-templates-post-js":["/component---src-templates-post-js-a30e348d709b8e74500d.js"],"component---src-pages-404-js":["/component---src-pages-404-js-224a4a61ab9775ba900d.js"]};/*]]>*/</script><script src="/webpack-runtime-edcc8e351786e4f5fe24.js" async=""></script><script src="/app-3d34126c26312025b100.js" async=""></script><script src="/commons-49bb98a60abcd33caf3c.js" async=""></script><script src="/component---src-templates-post-js-a30e348d709b8e74500d.js" async=""></script><script src="/styles-9a353c6f1161ef8c88fb.js" async=""></script></body></html>