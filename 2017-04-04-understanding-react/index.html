<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.ebcd1856d9be4c2d6fc8.css">code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}

/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}h1{font-size:2em;margin:.67em 0}a{background-color:transparent}small{font-size:80%}h1,p{margin:0}html{font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}*,:after,:before{box-sizing:border-box;border:0 solid #e2e8f0}h1{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}.bg-white{--bg-opacity:1;background-color:#fff;background-color:rgba(255,255,255,var(--bg-opacity))}.bg-gray-100{--bg-opacity:1;background-color:#f7fafc;background-color:rgba(247,250,252,var(--bg-opacity))}.bg-gray-300{--bg-opacity:1;background-color:#e2e8f0;background-color:rgba(226,232,240,var(--bg-opacity))}.hover\:bg-gray-400:hover{--bg-opacity:1;background-color:#cbd5e0;background-color:rgba(203,213,224,var(--bg-opacity))}.rounded{border-radius:.25rem}.flex{display:flex}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.justify-start{justify-content:flex-start}.justify-between{justify-content:space-between}.font-bold{font-weight:700}.text-sm{font-size:.875rem}.text-lg{font-size:1.125rem}.text-xl{font-size:1.25rem}.text-3xl{font-size:1.875rem}.text-5xl{font-size:3rem}.my-4{margin-top:1rem;margin-bottom:1rem}.mx-auto{margin-left:auto;margin-right:auto}.mr-3{margin-right:.75rem}.p-6{padding:1.5rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.px-4{padding-left:1rem;padding-right:1rem}.px-5{padding-left:1.25rem;padding-right:1.25rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.pt-2{padding-top:.5rem}.pb-3{padding-bottom:.75rem}.pb-5{padding-bottom:1.25rem}.pl-5{padding-left:1.25rem}.pt-6{padding-top:1.5rem}.pb-6{padding-bottom:1.5rem}.shadow{box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06)}.hover\:shadow-md:hover{box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06)}.text-left{text-align:left}.text-gray-600{--text-opacity:1;color:#718096;color:rgba(113,128,150,var(--text-opacity))}.text-gray-700{--text-opacity:1;color:#4a5568;color:rgba(74,85,104,var(--text-opacity))}.text-pink-600{--text-opacity:1;color:#d53f8c;color:rgba(213,63,140,var(--text-opacity))}.hover\:text-gray-700:hover{--text-opacity:1;color:#4a5568;color:rgba(74,85,104,var(--text-opacity))}.hover\:text-gray-800:hover{--text-opacity:1;color:#2d3748;color:rgba(45,55,72,var(--text-opacity))}.uppercase{text-transform:uppercase}.capitalize{text-transform:capitalize}.no-underline{text-decoration:none}.hover\:underline:hover{text-decoration:underline}.w-1\/2{width:50%}.w-full{width:100%}.nunito{font-family:Nunito,sans-serif}p{margin-bottom:.75rem}h2{font-size:1.5rem}h2,h3{font-weight:700}h3{font-size:1.25rem}h4{font-size:1.125rem;font-weight:700}code{--text-opacity:1;color:#ed64a6;color:rgba(237,100,166,var(--text-opacity));--bg-opacity:1;background-color:#fff5f7;background-color:rgba(255,245,247,var(--bg-opacity));border-radius:.375rem;padding-left:.25rem;padding-right:.25rem}pre code{padding-left:0;padding-right:0}a{color:#ed64a6;color:rgba(237,100,166,var(--text-opacity));text-decoration:underline}a,blockquote{--text-opacity:1}blockquote{--border-opacity:1;border-color:#ed64a6;border-color:rgba(237,100,166,var(--border-opacity));border-left-width:4px;padding-left:1rem;margin-bottom:.75rem;color:#4a5568;color:rgba(74,85,104,var(--text-opacity))}ul{list-style-type:disc;margin-bottom:.5rem}ol,ul{list-style-position:inside}ol{list-style-type:decimal}</style><meta name="generator" content="Gatsby 2.18.17"/><link href="https://fonts.googleapis.com/css?family=Nunito:400,700" rel="stylesheet"/><link as="script" rel="preload" href="/webpack-runtime-1330e6380aaf6c8a6e94.js"/><link as="script" rel="preload" href="/commons-e4d1cf937e8afc4814a6.js"/><link as="script" rel="preload" href="/app-d804ca8346e83b6629a1.js"/><link as="script" rel="preload" href="/styles-7cbd95f2e426d3237055.js"/><link as="script" rel="preload" href="/component---src-templates-post-js-f482eaf3e97d399ee61e.js"/><link as="fetch" rel="preload" href="/page-data\2017-04-04-understanding-react\page-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="bg-gray-100 nunito"><div class="container mx-auto flex flex-wrap py-6"><header class="pl-5 pb-6"><a class="font-bold text-gray-700 uppercase hover:text-gray-700 text-5xl no-underline" href="/">Unlikenesses <span class="text-xl">A PHP Developer</span></a><nav><a class="no-underline mr-3 text-gray-600 hover:text-gray-700" href="https://twitter.com/unlikenesses" target="_blank" rel="noopener noreferrer">Twitter</a><a class="no-underline mr-3 text-gray-600 hover:text-gray-700" href="https://github.com/unlikenesses" target="_blank" rel="noopener noreferrer">GitHub</a><a class="no-underline text-gray-600 hover:text-gray-700" href="http://codepen.io/unlikenesses/" target="_blank" rel="noopener noreferrer">CodePen</a></nav></header><section class="w-full flex flex-col items-center px-3"><article class="w-full flex flex-col shadow my-4"><div class="bg-white flex flex-col justify-start p-6"><h1 class="text-3xl font-bold text-gray-700 capitalize">understanding react</h1><span class="text-sm pb-3 text-gray-600">04 April, 2017</span><div class="text-gray-700"><p>I'm working my way through the <a href="https://github.com/survivejs/react-book">Survive.js React: From Apprentice to Master book</a> and wanted to highlight a few points of confusion for me, hoping to clarify them on the way. Compared to the approaches I've been taught in other tutorials the approach here is slightly different. I'll try to pinpoint two or three areas of difference.</p>
<ol>
<li>This is a simple one. In one of the <a href="https://github.com/survivejs/react-book/blob/dev/manuscript/getting_started/03_implementing_notes.md">early chapters</a> the author <code>export default</code>s a function without assigning it to a variable or constant:</li>
</ol>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span></code></pre></div>
<p>Just a detail but it was a shortcut I hadn't encountered before. Easy enough to get accustomed to. (NB. Arrow functions were new enough to me that I was a bit confused by the use of round brackets instead of curly braces. If we don't use curly braces the arrow function implicitly returns whatever comes after the arrow. )</p>
<p>2.
The next issue came from the fact that the author is, at the start at least, using functions instead of classes to define their React components. This meant that props were being passed in a way that was unfamiliar to me (though perfectly clearly <a href="https://facebook.github.io/react/docs/components-and-props.html">documented</a> in the official docs). See this from the <a href="https://github.com/survivejs/react-book/blob/dev/manuscript/getting_started/03_implementing_notes.md">same chapter</a>:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>notes<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span></code></pre></div>
<p>Still slightly confusing, because the above-linked official docs always have <code>props</code> as the function's argument - the above example is obviously a way to extract a particular prop from the props object by putting it in curly braces, but I haven't seen it documented. </p>
<p>3.
When they move on to introducing state, the main <code>App</code> component is converted from a function to a class. I'm on more familiar territory here, but there's one or two niggles. First, where before my constructors have looked like this:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>their's looked like this:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>In fact, it seems that no one really knows why the docs recommend passing <code>props</code> to <code>super</code>. The book says:</p>
<blockquote>
<p>We're passing <code>props</code> to <code>super</code> by convention. If you don't pass it, <code>this.props</code> won't get set! </p>
</blockquote>
<p>But as <a href="http://stackoverflow.com/a/34995257">this Stackoverflow answer</a> says, <code>this.props</code> will still be available in later methods in the class even if it's not passed to <code>super()</code>. As the answer puts it, although the docs recommend passing <code>props</code>,</p>
<blockquote>
<p>However, no reason is provided. We can speculate it is either because of subclassing or for future compatibility.</p>
</blockquote>
<p>4.
Second niggle in the <code>App</code> class. Ok, this is less a niggle than something I had to learn. In the <code>render</code> method of <code>App</code>, the <code>notes</code> object of the app's <code>state</code> is passed as a prop to the <code>Notes</code> component:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{</span>notes<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span>
<span class="token operator">&lt;</span>Notes notes<span class="token operator">=</span><span class="token punctuation">{</span>notes<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre></div>
<p>This is an ES6 feature called <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment">destructuring</a>. It just grabs the <code>notes</code> object from <code>this.state</code> and puts it in a <code>notes</code> constant.</p>
<p>5.
Next one is to do with binding: the author adds an <code>addNote</code> method to the class. From the Wes Bos React for Beginners series I learnt that when a method wants to access <code>this</code> it has to be bound in the constructor like so:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">this</span><span class="token punctuation">.</span>addNote <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addNote</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>The author doesn't have this, and his method is instantiated like this:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function-variable function">addNote</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></code></pre></div>
<p>Now, when the author mentions binding here, he says:</p>
<blockquote>
<p> It would be possible to do that at the <code>constructor</code>, <code>render()</code>, or by using a specific syntax. I'm opting for the syntax option in this book. </p>
</blockquote>
<p>A quick google comes up with <a href="https://medium.com/@housecor/react-binding-patterns-5-approaches-for-handling-this-92c651b5af56">this article</a> about different approaches for binding <code>this</code>. It looks like the approach used by the SurviveJS author is number 5, "Use Arrow Function in Class Property". As the Medium article says, this has several advantages - mainly lack of repetition and performance enhancements.</p>
<p>6.
Wes Bos's tutorial says we need to make a copy of <code>state</code> before updating. It doesn't look like the SurviveJS tut does that:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  notes<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>notes<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
    id<span class="token punctuation">:</span> uuid<span class="token punctuation">.</span><span class="token function">v4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    task<span class="token punctuation">:</span> <span class="token string">'New task'</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>What <em>I think</em> is going on here is that since <code>concat</code> <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/concat">doesn't change an existing array, but returns a new array</a>, this is equivalent to taking a copy of the existing array, modifying the copy, then assigning the modified copy to the state.</p>
<p>7.
The files have the <code>.jsx</code> extension, while some other tuts I've seen use <code>.js</code>. This appears to be a <a href="https://www.reddit.com/r/reactjs/comments/4kkrwg/ask_js_or_jsx_extension/">debate</a> that is not particularly interesting.</p>
<p>Ok - those are just from chapter three of the Getting Started section... More to come.</p></div></div></article><div class="w-full flex pt-6"><a class="w-1/2 bg-white shadow hover:shadow-md text-left p-6 no-underline" href="/2017-02-19-laravel-artisan-create-crud/"><p class="text-lg text-gray-700 font-bold flex items-center">Previous<!-- -->:</p><p class="pt-2 capitalize">laravel artisan create crud<!-- --> <small>19 February, 2017</small></p></a><a class="w-1/2 bg-white shadow hover:shadow-md text-left p-6 no-underline" href="/2017-06-12-multiple-remotes/"><p class="text-lg text-gray-700 font-bold flex items-center">Next<!-- -->:</p><p class="pt-2 capitalize">multiple remotes<!-- --> <small>12 June, 2017</small></p></a></div></section></div><footer class="container mx-auto flex flex-wrap py-4 px-5 justify-between text-gray-600"><p>Unlikenesses</p><p>Built with <a href="https://www.gatsbyjs.org" target="_blank">GatsbyJS</a> and <a href="https://tailwindcss.com" target="_blank">Tailwind CSS</a></p></footer></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2017-04-04-understanding-react/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-d804ca8346e83b6629a1.js"],"component---src-templates-index-js":["/component---src-templates-index-js-20aed7baa943eb5e92df.js"],"component---src-templates-post-js":["/component---src-templates-post-js-f482eaf3e97d399ee61e.js"],"component---src-pages-404-js":["/component---src-pages-404-js-224a4a61ab9775ba900d.js"]};/*]]>*/</script><script src="/component---src-templates-post-js-f482eaf3e97d399ee61e.js" async=""></script><script src="/styles-7cbd95f2e426d3237055.js" async=""></script><script src="/app-d804ca8346e83b6629a1.js" async=""></script><script src="/commons-e4d1cf937e8afc4814a6.js" async=""></script><script src="/webpack-runtime-1330e6380aaf6c8a6e94.js" async=""></script></body></html>