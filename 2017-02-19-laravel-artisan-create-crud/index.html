<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.7affc1b2a00e128dd750.css">code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}*{box-sizing:border-box}body,html{margin:0;padding:0}html{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;line-height:1.5}@media (min-width:38em){html{font-size:20px}}body{color:#515151;background-color:#fff;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}a{color:#268bd2;text-decoration:none}a strong{color:inherit}a:focus,a:hover{text-decoration:underline}h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;font-weight:700;line-height:1.25;color:#313131;text-rendering:optimizeLegibility}h1{font-size:2rem}h2{margin-top:1rem;font-size:1.5rem}h3{margin-top:1.5rem;font-size:1.25rem}h4,h5,h6{margin-top:1rem;font-size:1rem}p{margin-top:0;margin-bottom:1rem}strong{color:#303030}dl,ol,ul{margin-top:0;margin-bottom:1rem}dt{font-weight:700}dd{margin-bottom:.5rem}hr{position:relative;margin:1.5rem 0;border:0;border-top:1px solid #eee;border-bottom:1px solid #fff}abbr{font-size:85%;font-weight:700;color:#555;text-transform:uppercase}abbr[title]{cursor:help;border-bottom:1px dotted #e5e5e5}code,pre{font-family:Menlo,Monaco,Courier New,monospace}code{padding:.25em .5em;font-size:85%;color:#bf616a;border-radius:3px}code,pre{background-color:#f9f9f9}pre{display:block;margin-top:0;margin-bottom:1rem;padding:1rem;font-size:.8rem;line-height:1.4;white-space:pre;white-space:pre-wrap;word-break:break-all;word-wrap:break-word}pre code{padding:0;font-size:100%;color:inherit;background-color:transparent}.highlight{margin-bottom:1rem;border-radius:4px}.highlight pre{margin-bottom:0}.gist .gist-file{font-family:Menlo,Monaco,Courier New,monospace!important}.gist .markdown-body{padding:15px}.gist pre{padding:0;background-color:transparent}.gist .gist-file .gist-data{font-size:.8rem!important;line-height:1.4}.gist code{padding:0;color:inherit;background-color:transparent;border-radius:0}blockquote{padding:.5rem 1rem;margin:.8rem 0;color:#7a7a7a;border-left:.25rem solid #e5e5e5}blockquote p:last-child{margin-bottom:0}@media (min-width:30em){blockquote{padding-right:5rem;padding-left:1.25rem}}img{display:block;max-width:100%;margin:0 0 1rem;border-radius:5px}table{margin-bottom:1rem;width:100%;border:1px solid #e5e5e5;border-collapse:collapse}td,th{padding:.25rem .5rem;border:1px solid #e5e5e5}tbody tr:nth-child(odd) td,tbody tr:nth-child(odd) th{background-color:#f9f9f9}.lead{font-size:1.25rem;font-weight:300}.message{margin-bottom:1rem;padding:1rem;color:#717171;background-color:#f9f9f9}.container{max-width:38rem;padding-left:1rem;padding-right:1rem;margin-left:auto;margin-right:auto}.masthead{padding-top:1rem;padding-bottom:1rem;margin-bottom:3rem}.masthead-title{margin-top:0;margin-bottom:0;color:#505050}.masthead-title a{color:#505050}.masthead-title small{font-size:75%;font-weight:400;color:silver;letter-spacing:0}.page,.post{margin-bottom:4em}.page-title,.post-title,.post-title a{color:#303030}.page-title,.post-title{margin-top:0}.post-date{display:block;margin-top:-.5rem;margin-bottom:1rem;color:#9a9a9a}.related{padding-top:2rem;padding-bottom:2rem;border-top:1px solid #eee}.related-posts{padding-left:0;list-style:none}.related-posts h3{margin-top:0}.related-posts li small{font-size:75%;color:#999}.related-posts li a:hover{color:#268bd2;text-decoration:none}.related-posts li a:hover small{color:inherit}.pagination{overflow:hidden;margin-left:-1rem;margin-right:-1rem;font-family:PT Sans,Helvetica,Arial,sans-serif;color:#ccc;text-align:center}.pagination-item{display:block;padding:1rem;border:1px solid #eee}.pagination-item:first-child{margin-bottom:-1px}a.pagination-item:hover{background-color:#f5f5f5}@media (min-width:30em){.pagination{margin:3rem 0}.pagination-item{float:left;width:50%}.pagination-item:first-child{margin-bottom:0;border-top-left-radius:4px;border-bottom-left-radius:4px}.pagination-item:last-child{margin-left:-1px;border-top-right-radius:4px;border-bottom-right-radius:4px}}html{font-family:"Noto Serif",Georgia,serif}@media (min-width:48em){html{font-size:16px}}@media (min-width:58em){html{font-size:17px;line-height:1.75}}.sidebar{font-family:Roboto Slab,Helvetica,Arial,sans-serif;text-align:center;padding:2rem 1rem;color:hsla(0,0%,100%,.5);background-color:#202020}@media (min-width:48em){.sidebar{position:fixed;top:0;left:0;bottom:0;width:18rem;text-align:left}}.sidebar a{color:#fff}.sidebar-about h1{color:#fff;margin-top:0;font-size:2.25rem}.sidebar-nav{margin-bottom:1rem}.sidebar-nav-item{display:block;line-height:1.75}a.sidebar-nav-item:focus,a.sidebar-nav-item:hover{text-decoration:underline}.sidebar-nav-item.active{font-weight:700}@media (min-width:48em){.sidebar-sticky{position:absolute;right:1rem;bottom:1rem;left:1rem}}.content{padding-top:4rem;padding-bottom:4rem}@media (min-width:48em){.content{max-width:38rem;margin-left:20rem;margin-right:2rem}}@media (min-width:64em){.content{margin-left:22rem;margin-right:4rem}}@media (min-width:48em){.layout-reverse .sidebar{left:auto;right:0}.layout-reverse .content{margin-left:2rem;margin-right:20rem}}@media (min-width:64em){.layout-reverse .content{margin-left:4rem;margin-right:22rem}}.page-title,.post-title,h2,h3,h4{font-family:Roboto Slab,Helvetica,Arial,sans-serif;text-transform:capitalize}.post-title{font-size:2rem}.theme-base-08 .sidebar{background-color:#ac4142}.theme-base-08 .content a,.theme-base-08 .related-posts li a:hover{color:#ac4142}.theme-base-09 .sidebar{background-color:#d28445}.theme-base-09 .content a,.theme-base-09 .related-posts li a:hover{color:#d28445}.theme-base-0a .sidebar{background-color:#f4bf75}.theme-base-0a .content a,.theme-base-0a .related-posts li a:hover{color:#f4bf75}.theme-base-0b .sidebar{background-color:#90a959}.theme-base-0b .content a,.theme-base-0b .related-posts li a:hover{color:#90a959}.theme-base-0c .sidebar{background-color:#75b5aa}.theme-base-0c .content a,.theme-base-0c .related-posts li a:hover{color:#75b5aa}.theme-base-0d .sidebar{background-color:#6a9fb5}.theme-base-0d .content a,.theme-base-0d .related-posts li a:hover{color:#6a9fb5}.theme-base-0e .sidebar{background-color:#aa759f}.theme-base-0e .content a,.theme-base-0e .related-posts li a:hover{color:#aa759f}.theme-base-0f .sidebar{background-color:#8f5536}.theme-base-0f .content a,.theme-base-0f .related-posts li a:hover{color:#8f5536}#mc_embed_signup form{display:block;position:relative;text-align:left;padding:10px 0 10px 3%}#mc_embed_signup h2{font-weight:700;padding:0;margin:15px 0;font-size:1.4em}#mc_embed_signup input{border:1px solid #999;-webkit-appearance:none}#mc_embed_signup input[type=checkbox]{-webkit-appearance:checkbox}#mc_embed_signup input[type=radio]{-webkit-appearance:radio}#mc_embed_signup input:focus{border-color:#333}#mc_embed_signup .button{clear:both;background-color:#aaa;border:0;border-radius:4px;letter-spacing:.03em;color:#fff;cursor:pointer;display:inline-block;font-size:15px;height:32px;line-height:32px;margin:0 5px 10px 0;padding:0;text-align:center;text-decoration:none;vertical-align:top;white-space:nowrap;width:auto;-webkit-transition:all .23s ease-in-out 0s;transition:all .23s ease-in-out 0s}#mc_embed_signup .button:hover{background-color:#777}#mc_embed_signup .small-meta{font-size:11px}#mc_embed_signup .nowrap{white-space:nowrap}#mc_embed_signup .clear{clear:none;display:inline}#mc_embed_signup label{display:block;font-size:16px;padding-bottom:10px;font-weight:700}#mc_embed_signup input.email{font-family:Open Sans,Helvetica Neue,Arial,Helvetica,Verdana,sans-serif;font-size:15px;display:block;padding:0 .4em;margin:0 4% 10px 0;min-height:32px;width:58%;min-width:130px;border-radius:3px}#mc_embed_signup input.button{display:block;width:35%;margin:0 0 10px;min-width:90px}#mc_embed_signup div#mce-responses{float:left;top:-1.4em;padding:0 .5em;overflow:hidden;width:90%;margin:0 5%;clear:both}#mc_embed_signup div.response{margin:1em 0;padding:1em .5em .5em 0;font-weight:700;float:left;top:-1.5em;z-index:1;width:80%}#mc_embed_signup #mce-error-response{display:none}#mc_embed_signup #mce-success-response{color:#529214;display:none}#mc_embed_signup label.error{display:block;float:none;width:auto;margin-left:1.05em;text-align:left;padding:.5em 0}#mc_embed_signup{clear:left;font-size:14px}#mc_embed_signup input{border:1px solid hsla(0,0%,100%,.5)}#mc_embed_signup input.email{width:100%;font-family:Roboto Slab,Helvetica,Arial,sans-serif}#mc_embed_signup form{padding-left:0}#mc_embed_signup input.button{width:50%}#mc_embed_signup .button{background-color:hsla(0,0%,100%,.5);font-family:Roboto Slab,Helvetica,Arial,sans-serif;color:#ac4142}#mc_embed_signup .button:hover{background-color:#fff}code[class*=language-],pre[class*=language-]{font-family:Menlo,Monaco,Courier New,monospace;font-size:14px}</style><meta name="generator" content="Gatsby 2.18.17"/><link href="https://fonts.googleapis.com/css?family=Roboto+Slab:700|Noto+Serif:400,400i,700,700i" rel="stylesheet"/><link as="script" rel="preload" href="/styles-ffd0efe155f6bf249370.js"/><link as="script" rel="preload" href="/component---src-templates-post-js-f5cc09e8ae0a226c09fb.js"/><link as="script" rel="preload" href="/commons-381280650d916c2afca6.js"/><link as="script" rel="preload" href="/app-501b3d1377148e8be1f3.js"/><link as="script" rel="preload" href="/webpack-runtime-49c2c85e940880ba405c.js"/><link as="fetch" rel="preload" href="/page-data\2017-02-19-laravel-artisan-create-crud\page-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="theme-base-08"><div class="sidebar"><div class="container sidebar-sticky"><div class="sidebar-about"><h1><a href="/">Unlikenesses</a></h1><p class="lead"></p></div><nav class="sidebar-nav"><a class="sidebar-nav-item" href="/">Blog</a><a class="sidebar-nav-item" href="/about/">About</a><a class="sidebar-nav-item" href="/experiments/">Experiments</a><a class="sidebar-nav-item" href="https://twitter.com/unlikenesses" target="_blank" rel="noopener noreferrer">Twitter</a><a class="sidebar-nav-item" href="https://github.com/unlikenesses" target="_blank" rel="noopener noreferrer">Github</a><a class="sidebar-nav-item" href="http://codepen.io/unlikenesses/" target="_blank" rel="noopener noreferrer">Codepen</a></nav><div><a class="twitter-follow-button" href="https://twitter.com/unlikenesses" target="_blank" rel="noopener noreferrer">Follow @unlikenesses</a></div><p>Â© <!-- -->2019</p></div></div><div class="content container"><div class="post"><h1 class="post-title">laravel artisan create crud</h1><span class="post-date">19 February, 2017</span><div><p>I recently found myself creating a simple CMS in Laravel to administer a small site, and wanted to speed up development while abstracting away from the fiddly bits around creating CRUD functionality. So I created an <a href="https://laravel.com/docs/5.4/artisan">Artisan command</a> to generate all the boring bits. Now I just run</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">art crud:make {resource-name}</code></pre></div>
<p>And the model, migration, controller, routes and views are created for me. I'll take you through the steps I followed to get to this point.</p>
<h4>1. Create the <code>artisan</code> command</h4>
<p>This was easy. As <a href="https://laravel.com/docs/5.4/artisan#writing-commands">the manual</a> says, just run</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">php artisan make:command [name-of-command]</code></pre></div>
<p>and <a href="https://laravel.com/docs/5.4/artisan#registering-commands">add it</a> to <code>app/Console/Kernel.php</code>. From there we can fill in the <code>signature</code>: 'crud:make {name}', and start to flesh out the <code>handle</code> method:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">name</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">argument</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">info</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Creating CRUD for table "'</span> <span class="token punctuation">.</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">name</span> <span class="token punctuation">.</span> <span class="token single-quoted-string string">'"'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">makeModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">makeController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">info</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Controller created successfully.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">makeRoutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">info</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Routes created successfully.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">makeViews</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">info</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Views created successfully.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">makeMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">info</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Admin menu created successfully.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h4>2. Make the model</h4>
<p>This bit's also straightforward. We want it so that when we run <code>crud:make</code> a model, controller etc are created. The model and migration are the easiest because an <code>artisan</code> command already exists for that. So again, following <a href="https://laravel.com/docs/5.4/artisan#programmatically-executing-commands">the manual</a>, we arrive at:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function">makeModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">call</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'make:model'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">name</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'-m'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token boolean constant">true</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This calls the <code>artisan make:model</code> command and the <code>-m</code> flag means that it should create the migration. That's two birds with one stone.</p>
<h4>3. Make the controller</h4>
<p>This is a bit more tricky. We could just use the <code>artisan make:controller</code> command, but we want some boilerplate already in there (the various CRUD commands). The answer is to create a <code>controller.stub</code> - basically a template of how we want the controller to look - and to inject our new resource's name at the appropriate points. This can be done easily with <code>str_replace</code>. So <code>makeController</code> looks a bit like this:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function">makeController</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$controllerName</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">name</span> <span class="token punctuation">.</span> <span class="token single-quoted-string string">'Controller.php'</span><span class="token punctuation">;</span>

    <span class="token function">file_put_contents</span><span class="token punctuation">(</span>
        <span class="token function">base_path</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'app/Http/Controllers/'</span> <span class="token punctuation">.</span> <span class="token variable">$controllerName</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">compileStub</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'controller.stub'</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>First we create the target name of the controller, which will be the resource's name concatenated to 'Controller.php'. We then use <code>file_put_contents</code> to create a file. The destination of the file is the first argument (i.e. the <code>Controllers</code> folder), while the second argument is the contents of the file. I use a helper method <code>compileStub</code> to inject the resource's name where applicable.</p>
<p>The <code>controller.stub</code> file is basically a resource controller with the methods partially filled in. I won't give the whole file - that will vary from app to app - but for me, the class and <code>index</code> method look like this:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span></span><span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>User</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>Controller <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$rows</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'admin.{{routeName}}.index'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'rows'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token variable">$rows</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>I use the convention of two curly brackets to specify the placeholders where the name will be injected: <code>{{name}}</code> and <code>{{routeName}}</code>. So if our resource is called <code>Post</code>, the above would resolve to:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Post</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>User</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">PostController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$rows</span> <span class="token operator">=</span> Post<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'admin.posts.index'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'rows'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token variable">$rows</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This replacement occurs in my <code>compileStub</code> method:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function">compileStub</span><span class="token punctuation">(</span><span class="token variable">$stub</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">str_replace</span><span class="token punctuation">(</span>
        <span class="token single-quoted-string string">'{{name}}'</span><span class="token punctuation">,</span>
        <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">name</span><span class="token punctuation">,</span>
        <span class="token function">str_replace</span><span class="token punctuation">(</span>
            <span class="token single-quoted-string string">'{{routeName}}'</span><span class="token punctuation">,</span>
            <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">pluralisedName</span><span class="token punctuation">,</span>
            <span class="token function">str_replace</span><span class="token punctuation">(</span>
                <span class="token single-quoted-string string">'{{argName}}'</span><span class="token punctuation">,</span>
                <span class="token function">strtolower</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">name</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token function">file_get_contents</span><span class="token punctuation">(</span><span class="token function">base_path</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'app/stubs/crud/'</span> <span class="token punctuation">.</span> <span class="token variable">$stub</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>This rather ungainly code replaces all instances of <code>{{name}}</code> with the resource name; all instances of <code>{{routeName}}</code> with a pluralised, lower-case version of the name (I'll leave it up to you to figure out the pluralisation); and all instances of <code>{{argName}}</code> with a lower-case version of the resource name (which I assume to be singular). This is just the nomenclature I use in my CMS - it could be anything.</p>
<h4>4. Make the routes</h4>
<p>This follows a similar principle to the previous step: I have a stub file (<code>routes.stub</code>) which contains the generic routes for a resource:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php">Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/{{routeName}}'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'{{name}}Controller@index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/{{routeName}}/create'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'{{name}}Controller@create'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/{{routeName}}'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'{{name}}Controller@store'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/{{routeName}}/{{{argName}}}/edit'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'{{name}}Controller@edit'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">patch</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/{{routeName}}/{{{argName}}}'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'{{name}}Controller@update'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/{{routeName}}/{{{argName}}}/delete'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'{{name}}Controller@confirmDelete'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/{{routeName}}/{{{argName}}}'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'{{name}}Controller@destroy'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>I then replace the placeholders with the resource's name but this time instead of creating a new file I append this to the end of my existing admin routes file:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function">makeRoutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">file_put_contents</span><span class="token punctuation">(</span>
        <span class="token function">base_path</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'routes/admin.php'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">compileStub</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'routes.stub'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token constant">FILE_APPEND</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h4>5. Make the views</h4>
<p>This is getting a bit predictable. Again, to create the CMS views I have a stub for each view which I then inject with the appropriate names, before creating the views folder for this resource and creating the view files from the stubs.</p>
<p>That's it! In following this procedure with stubs and injecting the resource name I was just copying how Laravel already does it. If you take a look at the code for the <code>make:auth</code> command, in <code>framework\src\Illuminate\Auth\Console\MakeAuthCommand.php</code> (<a href="https://github.com/laravel/framework/blob/5.4/src/Illuminate/Auth/Console/MakeAuthCommand.php">source on Github</a>) you'll find almost exactly this workflow.</p></div></div><div class="related"><ul class="related-posts"><li><h3>Previous<!-- -->:<!-- --> <a href="/2016-03-12-laravel-on-fasthosts/">laravel on fasthosts<!-- --> <small>12 March, 2016</small></a></h3></li><li><h3>Next<!-- -->:<!-- --> <a href="/2017-04-04-understanding-react/">understanding react<!-- --> <small>04 April, 2017</small></a></h3></li></ul></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2017-02-19-laravel-artisan-create-crud/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-501b3d1377148e8be1f3.js"],"component---src-templates-index-js":["/component---src-templates-index-js-eb76932f758c39f94510.js"],"component---src-templates-post-js":["/component---src-templates-post-js-f5cc09e8ae0a226c09fb.js"],"component---src-templates-page-js":["/component---src-templates-page-js-0f8283e9ea284a99fda0.js"],"component---src-pages-404-js":["/component---src-pages-404-js-224a4a61ab9775ba900d.js"]};/*]]>*/</script><script src="/webpack-runtime-49c2c85e940880ba405c.js" async=""></script><script src="/app-501b3d1377148e8be1f3.js" async=""></script><script src="/commons-381280650d916c2afca6.js" async=""></script><script src="/component---src-templates-post-js-f5cc09e8ae0a226c09fb.js" async=""></script><script src="/styles-ffd0efe155f6bf249370.js" async=""></script></body></html>