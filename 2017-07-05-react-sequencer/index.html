<!DOCTYPE html>
 <html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/component---src-layouts-index-js-7df041701cf4f91df84f.js" as="script"/><link rel="preload" href="/component---src-templates-post-js-76dc69f022ab826f0635.js" as="script"/><link rel="preload" href="/path---2017-07-05-react-sequencer-01198608e3a49aa48f51.js" as="script"/><link rel="preload" href="/app-6401533e476656f79779.js" as="script"/><link rel="preload" href="/commons-c98b01152894ae2b67c3.js" as="script"/><script id="webpack-manifest">
            //<![CDATA[
            window.webpackManifest = {"231608221292675":"app-6401533e476656f79779.js","104101334113578":"component---src-templates-index-js-6d2a4423a0248e33c079.js","195351340454287":"component---src-templates-post-js-76dc69f022ab826f0635.js","96961042003272":"component---src-templates-page-js-d5c0e705de1e6e4de7ac.js","162898551421021":"component---src-pages-404-js-d531b70477459f1814e4.js","60335399758886":"path----0f20a0fc9d4a46d1823e.js","142629428675168":"path---index-1a857483eec1556fb512.js","157285553617042":"path---2-d4ef60c33c9f363db8f1.js","182981024786761":"path---3-bbd38557da8d69092815.js","24461200302109":"path---4-179fed329595a8182547.js","81823991089174":"path---5-3785c571d49d75b0dbab.js","161064502438360":"path---6-311582f93b45546e6b57.js","135192265913235":"path---7-d0573a257e3cec35af7b.js","124787695326054":"path---8-1c58748466cf3b2827c1.js","213466077792436":"path---9-904c81641129d5cc7f84.js","9808220947040":"path---2018-03-24-laracasts-lessons-e0aab5d2b6e048dc8c56.js","84909672733991":"path---2018-02-20-http-components-58bf125da37901317cd8.js","65703697086429":"path---2017-11-06-migrating-blog-to-gatsby-2dd1e4582c39adc0655d.js","82159097398771":"path---2017-08-10-jwts-with-react-and-laravel-9fa92a2c75f9ed4cf872.js","42858671310536":"path---2017-07-31-redux-with-local-storage-494fec0005c999965f77.js","260890707284528":"path---2017-07-19-rails-on-windows-with-vagrant-c57d1b20c8eebeb7102c.js","38482880249802":"path---2017-07-18-laravel-and-react-288fa008121629940d0c.js","195319379033395":"path---2017-07-14-react-sequencer-redux-bc6dc982e0b8342a1131.js","112315994342886":"path---2017-07-05-react-sequencer-01198608e3a49aa48f51.js","268830554003963":"path---2017-06-29-vue-loader-modals-fed1c6ca205ad37efa17.js","279153020621834":"path---2017-06-22-git-forgetfulness-663a4b1557a8cb1295ad.js","276809233923553":"path---2017-06-21-vue-transitions-ef4008d05480f1750ad9.js","31086155586662":"path---2017-06-12-multiple-remotes-182e704e307b2fbab9cc.js","177989185540973":"path---2017-04-04-understanding-react-43b1e40c4f55a1628e28.js","174035726735906":"path---2017-02-19-laravel-artisan-create-crud-8ee5d2cb69a9213f2b59.js","181250746654499":"path---2016-03-12-laravel-on-fasthosts-ac78842520e4bd31d111.js","4684662507324":"path---2016-02-20-mp-info-b196533debc22059fc42.js","218487729792812":"path---2015-12-17-backbone-todo-tutorial-part-two-d48cade4b09359ec12b3.js","227955374642705":"path---2015-12-16-backbone-todo-tutorial-part-one-a1611070540c6d3ca3e2.js","203214790603947":"path---2015-10-22-tanking-137eb6db27fc1c612dcb.js","32735643032460":"path---2015-10-09-soft-cascading-6a47bf56590d6f18204f.js","83046412945820":"path---2015-09-06-literally-literals-5606a47b37879c37ded8.js","109709943139863":"path---2015-08-17-glossy-47eba200e21eaecb12e4.js","32773584370824":"path---2015-07-29-commentment-f2fb61c5d191dd84ffaf.js","192318839099629":"path---2015-07-27-kicking-against-the-gits-38190fbd87dd16f8618a.js","18427234579038":"path---2015-06-28-grunting-b07e6e53888f4759898e.js","69790250895867":"path---experiments-6fb98fb9139180136091.js","273950069227526":"path---about-06ea1e126b2fec72d301.js","254022195166212":"path---404-1db04e5021b40904aca6.js","178698757827068":"path---404-html-1db04e5021b40904aca6.js","114276838955818":"component---src-layouts-index-js-7df041701cf4f91df84f.js"}
            //]]>
            </script><link href="https://fonts.googleapis.com/css?family=Roboto+Slab:700|Noto+Serif:400,400i,700,700i" rel="stylesheet"/><script>
  !function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",[
  "/commons-c98b01152894ae2b67c3.js","/app-6401533e476656f79779.js","/path---2017-07-05-react-sequencer-01198608e3a49aa48f51.js","/component---src-templates-post-js-76dc69f022ab826f0635.js","/component---src-layouts-index-js-7df041701cf4f91df84f.js"
])
  </script><style id="gatsby-inlined-css">code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}*{box-sizing:border-box}body,html{margin:0;padding:0}html{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;line-height:1.5}@media (min-width:38em){html{font-size:20px}}body{color:#515151;background-color:#fff;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}a{color:#268bd2;text-decoration:none}a strong{color:inherit}a:focus,a:hover{text-decoration:underline}h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;font-weight:700;line-height:1.25;color:#313131;text-rendering:optimizeLegibility}h1{font-size:2rem}h2{margin-top:1rem;font-size:1.5rem}h3{margin-top:1.5rem;font-size:1.25rem}h4,h5,h6{margin-top:1rem;font-size:1rem}p{margin-top:0;margin-bottom:1rem}strong{color:#303030}dl,ol,ul{margin-top:0;margin-bottom:1rem}dt{font-weight:700}dd{margin-bottom:.5rem}hr{position:relative;margin:1.5rem 0;border:0;border-top:1px solid #eee;border-bottom:1px solid #fff}abbr{font-size:85%;font-weight:700;color:#555;text-transform:uppercase}abbr[title]{cursor:help;border-bottom:1px dotted #e5e5e5}code,pre{font-family:Menlo,Monaco,Courier New,monospace}code{padding:.25em .5em;font-size:85%;color:#bf616a;border-radius:3px}code,pre{background-color:#f9f9f9}pre{display:block;margin-top:0;margin-bottom:1rem;padding:1rem;font-size:.8rem;line-height:1.4;white-space:pre;white-space:pre-wrap;word-break:break-all;word-wrap:break-word}pre code{padding:0;font-size:100%;color:inherit;background-color:transparent}.highlight{margin-bottom:1rem;border-radius:4px}.highlight pre{margin-bottom:0}.gist .gist-file{font-family:Menlo,Monaco,Courier New,monospace!important}.gist .markdown-body{padding:15px}.gist pre{padding:0;background-color:transparent}.gist .gist-file .gist-data{font-size:.8rem!important;line-height:1.4}.gist code{padding:0;color:inherit;background-color:transparent;border-radius:0}blockquote{padding:.5rem 1rem;margin:.8rem 0;color:#7a7a7a;border-left:.25rem solid #e5e5e5}blockquote p:last-child{margin-bottom:0}@media (min-width:30em){blockquote{padding-right:5rem;padding-left:1.25rem}}img{display:block;max-width:100%;margin:0 0 1rem;border-radius:5px}table{margin-bottom:1rem;width:100%;border:1px solid #e5e5e5;border-collapse:collapse}td,th{padding:.25rem .5rem;border:1px solid #e5e5e5}tbody tr:nth-child(odd) td,tbody tr:nth-child(odd) th{background-color:#f9f9f9}.lead{font-size:1.25rem;font-weight:300}.message{margin-bottom:1rem;padding:1rem;color:#717171;background-color:#f9f9f9}.container{max-width:38rem;padding-left:1rem;padding-right:1rem;margin-left:auto;margin-right:auto}.masthead{padding-top:1rem;padding-bottom:1rem;margin-bottom:3rem}.masthead-title{margin-top:0;margin-bottom:0;color:#505050}.masthead-title a{color:#505050}.masthead-title small{font-size:75%;font-weight:400;color:silver;letter-spacing:0}.page,.post{margin-bottom:4em}.page-title,.post-title,.post-title a{color:#303030}.page-title,.post-title{margin-top:0}.post-date{display:block;margin-top:-.5rem;margin-bottom:1rem;color:#9a9a9a}.related{padding-top:2rem;padding-bottom:2rem;border-top:1px solid #eee}.related-posts{padding-left:0;list-style:none}.related-posts h3{margin-top:0}.related-posts li small{font-size:75%;color:#999}.related-posts li a:hover{color:#268bd2;text-decoration:none}.related-posts li a:hover small{color:inherit}.pagination{overflow:hidden;margin-left:-1rem;margin-right:-1rem;font-family:PT Sans,Helvetica,Arial,sans-serif;color:#ccc;text-align:center}.pagination-item{display:block;padding:1rem;border:1px solid #eee}.pagination-item:first-child{margin-bottom:-1px}a.pagination-item:hover{background-color:#f5f5f5}@media (min-width:30em){.pagination{margin:3rem 0}.pagination-item{float:left;width:50%}.pagination-item:first-child{margin-bottom:0;border-top-left-radius:4px;border-bottom-left-radius:4px}.pagination-item:last-child{margin-left:-1px;border-top-right-radius:4px;border-bottom-right-radius:4px}}html{font-family:Noto Serif,Georgia,serif}@media (min-width:48em){html{font-size:16px}}@media (min-width:58em){html{font-size:17px;line-height:1.75}}.sidebar{font-family:Roboto Slab,Helvetica,Arial,sans-serif;text-align:center;padding:2rem 1rem;color:hsla(0,0%,100%,.5);background-color:#202020}@media (min-width:48em){.sidebar{position:fixed;top:0;left:0;bottom:0;width:18rem;text-align:left}}.sidebar a{color:#fff}.sidebar-about h1{color:#fff;margin-top:0;font-size:2.25rem}.sidebar-nav{margin-bottom:1rem}.sidebar-nav-item{display:block;line-height:1.75}a.sidebar-nav-item:focus,a.sidebar-nav-item:hover{text-decoration:underline}.sidebar-nav-item.active{font-weight:700}@media (min-width:48em){.sidebar-sticky{position:absolute;right:1rem;bottom:1rem;left:1rem}}.content{padding-top:4rem;padding-bottom:4rem}@media (min-width:48em){.content{max-width:38rem;margin-left:20rem;margin-right:2rem}}@media (min-width:64em){.content{margin-left:22rem;margin-right:4rem}}@media (min-width:48em){.layout-reverse .sidebar{left:auto;right:0}.layout-reverse .content{margin-left:2rem;margin-right:20rem}}@media (min-width:64em){.layout-reverse .content{margin-left:4rem;margin-right:22rem}}.page-title,.post-title,h2,h3,h4{font-family:Roboto Slab,Helvetica,Arial,sans-serif;text-transform:capitalize}.post-title{font-size:2rem}.theme-base-08 .sidebar{background-color:#ac4142}.theme-base-08 .content a,.theme-base-08 .related-posts li a:hover{color:#ac4142}.theme-base-09 .sidebar{background-color:#d28445}.theme-base-09 .content a,.theme-base-09 .related-posts li a:hover{color:#d28445}.theme-base-0a .sidebar{background-color:#f4bf75}.theme-base-0a .content a,.theme-base-0a .related-posts li a:hover{color:#f4bf75}.theme-base-0b .sidebar{background-color:#90a959}.theme-base-0b .content a,.theme-base-0b .related-posts li a:hover{color:#90a959}.theme-base-0c .sidebar{background-color:#75b5aa}.theme-base-0c .content a,.theme-base-0c .related-posts li a:hover{color:#75b5aa}.theme-base-0d .sidebar{background-color:#6a9fb5}.theme-base-0d .content a,.theme-base-0d .related-posts li a:hover{color:#6a9fb5}.theme-base-0e .sidebar{background-color:#aa759f}.theme-base-0e .content a,.theme-base-0e .related-posts li a:hover{color:#aa759f}.theme-base-0f .sidebar{background-color:#8f5536}.theme-base-0f .content a,.theme-base-0f .related-posts li a:hover{color:#8f5536}#mc_embed_signup form{display:block;position:relative;text-align:left;padding:10px 0 10px 3%}#mc_embed_signup h2{font-weight:700;padding:0;margin:15px 0;font-size:1.4em}#mc_embed_signup input{border:1px solid #999;-webkit-appearance:none}#mc_embed_signup input[type=checkbox]{-webkit-appearance:checkbox}#mc_embed_signup input[type=radio]{-webkit-appearance:radio}#mc_embed_signup input:focus{border-color:#333}#mc_embed_signup .button{clear:both;background-color:#aaa;border:0 none;border-radius:4px;letter-spacing:.03em;color:#fff;cursor:pointer;display:inline-block;font-size:15px;height:32px;line-height:32px;margin:0 5px 10px 0;padding:0;text-align:center;text-decoration:none;vertical-align:top;white-space:nowrap;width:auto;transition:all .23s ease-in-out 0s}#mc_embed_signup .button:hover{background-color:#777}#mc_embed_signup .small-meta{font-size:11px}#mc_embed_signup .nowrap{white-space:nowrap}#mc_embed_signup .clear{clear:none;display:inline}#mc_embed_signup label{display:block;font-size:16px;padding-bottom:10px;font-weight:700}#mc_embed_signup input.email{font-family:Open Sans,Helvetica Neue,Arial,Helvetica,Verdana,sans-serif;font-size:15px;display:block;padding:0 .4em;margin:0 4% 10px 0;min-height:32px;width:58%;min-width:130px;border-radius:3px}#mc_embed_signup input.button{display:block;width:35%;margin:0 0 10px;min-width:90px}#mc_embed_signup div#mce-responses{float:left;top:-1.4em;padding:0 .5em;overflow:hidden;width:90%;margin:0 5%;clear:both}#mc_embed_signup div.response{margin:1em 0;padding:1em .5em .5em 0;font-weight:700;float:left;top:-1.5em;z-index:1;width:80%}#mc_embed_signup #mce-error-response{display:none}#mc_embed_signup #mce-success-response{color:#529214;display:none}#mc_embed_signup label.error{display:block;float:none;width:auto;margin-left:1.05em;text-align:left;padding:.5em 0}#mc_embed_signup{clear:left;font-size:14px}#mc_embed_signup input{border:1px solid hsla(0,0%,100%,.5)}#mc_embed_signup input.email{width:100%;font-family:Roboto Slab,Helvetica,Arial,sans-serif}#mc_embed_signup form{padding-left:0}#mc_embed_signup input.button{width:50%}#mc_embed_signup .button{background-color:hsla(0,0%,100%,.5);font-family:Roboto Slab,Helvetica,Arial,sans-serif;color:#ac4142}#mc_embed_signup .button:hover{background-color:#fff}</style></head><body><div id="___gatsby"><div class="theme-base-08" data-reactroot="" data-reactid="1" data-react-checksum="1973398006"><div class="sidebar" data-reactid="2"><div class="container sidebar-sticky" data-reactid="3"><div class="sidebar-about" data-reactid="4"><h1 data-reactid="5"><a href="/" data-reactid="6">Unlikenesses</a></h1><p class="lead" data-reactid="7"></p></div><nav class="sidebar-nav" data-reactid="8"><a class="sidebar-nav-item" href="/" data-reactid="9">Blog</a><a class="sidebar-nav-item" href="/about/" data-reactid="10">About</a><a class="sidebar-nav-item" href="/experiments/" data-reactid="11">Experiments</a><a class="sidebar-nav-item" href="https://twitter.com/unlikenesses" target="_blank" data-reactid="12">Twitter</a><a class="sidebar-nav-item" href="https://github.com/unlikenesses" target="_blank" data-reactid="13">Github</a><a class="sidebar-nav-item" href="http://codepen.io/unlikenesses/" target="_blank" data-reactid="14">Codepen</a></nav><div id="mc_embed_signup" data-reactid="15"><form action="//unlikenesses.us16.list-manage.com/subscribe/post?u=10d0fb49bc331ab8668b0fa14&amp;id=786a57e78d" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="" data-reactid="16"><div id="mc_embed_signup_scroll" data-reactid="17"><label for="mce-EMAIL" data-reactid="18">Subscribe for updates</label><input type="email" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required="" data-reactid="19"/><div style="position:absolute;left:-5000px;" aria-hidden="true" data-reactid="20"><input type="text" name="b_10d0fb49bc331ab8668b0fa14_786a57e78d" tabindex="-1" data-reactid="21"/></div><div class="clear" data-reactid="22"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button" data-reactid="23"/></div></div></form></div><p data-reactid="24"><!-- react-text: 25 -->Â© <!-- /react-text --><!-- react-text: 26 -->2018<!-- /react-text --></p></div></div><div class="content container" data-reactid="27"><div data-reactid="28"><div class="post" data-reactid="29"><h1 class="post-title" data-reactid="30">react sequencer</h1><span class="post-date" data-reactid="31">05 July, 2017</span><div data-reactid="32"><p>As an exercise I'm going to build a simple sequencer in React. You can view it in action <a href="http://unlikenesses.com/react-sequencer/">here</a>. The final source code is on <a href="https://github.com/unlikenesses/react-sequencer">Github</a>.</p>
<p>I'll start with <a href="https://github.com/facebookincubator/create-react-app">create-react-app</a>, which provides the necessary initial bootstrapping so we can get going quickly. If you don't already have it installed, run</p>
<div class="gatsby-highlight">
      <pre class="language-none"><code>npm install -g create-react-app</code></pre>
      </div>
<p>Then to create a new app:</p>
<div class="gatsby-highlight">
      <pre class="language-none"><code>create-react-app sequencer</code></pre>
      </div>
<p>When that's finished, run <code>npm start</code> to open the base project in the browser.</p>
<p>The first thing we need to do is consider the structure of the app. At the most basic level we're going to want a <code>controls</code> component and an area to contain the pads. So open up <code>src/App.js</code> and replace it with this skeleton structure:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./App.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Pads <span class="token keyword">from</span> <span class="token string">'./components/Pads'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Controls <span class="token keyword">from</span> <span class="token string">'./components/Controls'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"App"</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>Controls <span class="token operator">/</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>Pads <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre>
      </div>
<p>All we've done is import two non-existent components, <code>Pads</code> and <code>Controls</code> and inserted them in the <code>App</code> component. For now create a <code>components</code> folder in <code>src</code> and then create two empty components:</p>
<p><strong>Pad</strong></p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Pads</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">></span>
                Pads
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Pads<span class="token punctuation">;</span>
</code></pre>
      </div>
<p><strong>Controls</strong></p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Controls</span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"controls"</span><span class="token operator">></span>
            Controls
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>          
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Controls<span class="token punctuation">;</span>
</code></pre>
      </div>
<p>Let's look at building out the <code>Pads</code> component first. We're going to want 8 rows, each row having 8 pads. Because we want to keep track of the state of each pad (on or off), we need to define a state object in the <code>constructor</code> of the <code>Pads</code> component:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
    pads<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>I'm just using an array of 8 rows, each row containing 8 elements which will be <code>0</code> or <code>1</code> depending on their state. We can use the <code>map</code> function to display these in the <code>render</code> function:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"pads"</span><span class="token operator">></span>
        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>pads<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>row<span class="token punctuation">,</span> rowIndex<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>
                <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"row"</span> key<span class="token operator">=</span><span class="token punctuation">{</span>rowIndex<span class="token punctuation">}</span><span class="token operator">></span>a
                    <span class="token punctuation">{</span>row<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>pad<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
                        <span class="token keyword">return</span> <span class="token operator">&lt;</span>Pad key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<p>This iterates over each row in the <code>pads</code> state, and for each row returns a <code>div</code>, in which we map again over each element in that row, for each element returning a <code>Pad</code> component. We have to pass the <code>key</code> attribute so that React can <a href="https://facebook.github.io/react/docs/lists-and-keys.html#keys">identify which elements have changed</a> at any given point.</p>
<p>We need to quickly create this <code>Pad</code> component in <code>components/Pad.js</code>:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Pad</span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"pad"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Pad<span class="token punctuation">;</span>
</code></pre>
      </div>
<p>And let's add some styling: in <code>src/App.css</code> delete everything and add these styles:</p>
<div class="gatsby-highlight">
      <pre class="language-css"><code><span class="token selector">.row</span> <span class="token punctuation">{</span>
  <span class="token property">clear</span><span class="token punctuation">:</span> both<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.pad</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
  <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0 5px 5px 0<span class="token punctuation">;</span>
  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> grey<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>The next step is to allow the active state of a pad to be changed when you click on it. In <code>Pads</code> create a new function to toggle a pad's state - we'll just <code>console.log</code> the output for now:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token function">toggleActive</span><span class="token punctuation">(</span>rowIndex<span class="token punctuation">,</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Changed'</span><span class="token punctuation">,</span> rowIndex<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>This will take the index of a row and the index of a pad within that row. We'll also need to bind <code>toggleActive</code> to <code>this</code> so we can reference the state later. So in the constructor put this line:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>toggleActive <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>toggleActive<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<p>We then need to pass it - along with <code>rowIndex</code>, the pad's index, and the pad's active state - as properties to the <code>Pad</code> component, so modify <code>Pads</code> like so:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">return</span> <span class="token operator">&lt;</span>Pad 
        key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span> 
        rowIndex<span class="token operator">=</span><span class="token punctuation">{</span>rowIndex<span class="token punctuation">}</span> 
        id<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span> 
        state<span class="token operator">=</span><span class="token punctuation">{</span>pad<span class="token punctuation">}</span>
        toggleActive<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>toggleActive<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
</code></pre>
      </div>
<p>Then in <code>Pad</code> we just need to add an <code>onClick</code> event that calls the <code>toggleActive</code> method in its parent component, passing its <code>rowIndex</code> and <code>id</code>:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div 
        className<span class="token operator">=</span><span class="token string">"pad"</span>
        onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> props<span class="token punctuation">.</span><span class="token function">toggleActive</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>rowIndex<span class="token punctuation">,</span> props<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<p>Now when you click on a pad you should see its coordinates in the console. Now we need to find the appropriate element in the <code>state</code> and toggle its value between <code>0</code> and <code>1</code>. In the <code>toggleActive</code> function in <code>Pads</code> first we make a copy of the <code>pads</code> state and get the current value of the pad that's been clicked:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">let</span> pads <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>pads<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> padActive <span class="token operator">=</span> pads<span class="token punctuation">[</span>rowIndex<span class="token punctuation">]</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<p>We're using the <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Spread_operator">spread operator</a> to make a clone of the pads array, then getting the clicked pad's current active state (<code>0</code> or <code>1</code>). Then we just need to toggle it and update the state:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token function">toggleActive</span><span class="token punctuation">(</span>rowIndex<span class="token punctuation">,</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> pads <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>pads<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> padState <span class="token operator">=</span> pads<span class="token punctuation">[</span>rowIndex<span class="token punctuation">]</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>padState <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        pads<span class="token punctuation">[</span>rowIndex<span class="token punctuation">]</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        pads<span class="token punctuation">[</span>rowIndex<span class="token punctuation">]</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> pads<span class="token punctuation">:</span> pads <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>We now need to conditionally add an <code>active</code> class to the <code>Pad</code> component depending on whether its value is <code>0</code> or <code>1</code>:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token operator">&lt;</span>div 
    className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">"pad "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>state <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">'active'</span> <span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> props<span class="token punctuation">.</span><span class="token function">toggleActive</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>rowIndex<span class="token punctuation">,</span> props<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
</code></pre>
      </div>
<p>Finally, add a quick <code>active</code> style to <code>App.css</code> so we can see it in action:</p>
<div class="gatsby-highlight">
      <pre class="language-css"><code><span class="token selector">.pad.active</span> <span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>Now when you click on a pad, it should turn green, and go back to grey when you click on it again.</p>
<p>Onto the controls... We'll need a piece of state that keeps track of whether the sequencer is playing or not. This needs to go in the root <code>App</code> component, so add a <code>constructor</code> and put it there. We'll also put a <code>pos</code> variable there to keep track of our position in the grid when the sequencer's playing, and a <code>bpm</code> value for when we set up our timer:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
        playing<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        pos<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        bpm<span class="token punctuation">:</span> <span class="token number">220</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>togglePlaying <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>togglePlaying<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>I've added a binding for the next method we'll need, which will toggle between playing and not-playing. Add this to <code>App.js</code>:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token function">togglePlaying</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>playing<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> playing<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> playing<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>This grabs the current state, and updates it with its opposite. Pass this method as a property to the <code>Controls</code> component, along with the <code>playing</code> state:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token operator">&lt;</span>Controls playing<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>playing<span class="token punctuation">}</span> togglePlaying<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>togglePlaying<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
</code></pre>
      </div>
<p>Then pick it up in <code>Controls.js</code>. I'm adding a line to set the button text according to whether the <code>playing</code> state is <code>true</code> or <code>false</code>:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">let</span> buttonText <span class="token operator">=</span> props<span class="token punctuation">.</span>playing <span class="token operator">?</span> <span class="token string">'Stop'</span> <span class="token punctuation">:</span> <span class="token string">'Play'</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"controls"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> props<span class="token punctuation">.</span><span class="token function">togglePlaying</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>buttonText<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>          
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<p>We now need to be able to set and clear a timer that will call a <code>tick</code> method every <code>x</code> seconds, where <code>x</code> is calculated from our <code>bpm</code>. Let's start with the set method, remaining in <code>App.js</code>:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token function">setTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>timerId <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">tick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">calculateTempo</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>bpm<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>This uses Javascript's <code>setInterval</code> method to call <code>tick()</code> on a regular basis. We store it in a <code>timerId</code> variable so we can clear it when the user clicks Stop. <code>calculateTempo()</code> is pretty simple:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token function">calculateTempo</span><span class="token punctuation">(</span>bpm<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">60000</span> <span class="token operator">/</span> bpm<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>Our <code>tick</code> method will increment the current <code>pos</code> and reset it to <code>0</code> if it reaches <code>7</code>:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token function">tick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> pos <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>pos<span class="token punctuation">;</span>
    pos<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pos <span class="token operator">></span> <span class="token number">7</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> pos<span class="token punctuation">:</span> pos <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>Now hook this all up to the <code>togglePlaying</code> method:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token function">togglePlaying</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>playing<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">clearInterval</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timerId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> playing<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> playing<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>Notice that now if the Play/Stop button is clicked and we are currently playing, we call <code>clearInterval</code> on the timer, which will stop it. If we are not currently playing we start the timer. If you run this now you should see the <code>pos</code> variable being logged to the console when you click Play. But we want the actual pads to be highlighted when their position corresponds to the root <code>pos</code> state. To do this we need to pass the <code>pos</code> state down, via the <code>Pads</code> component, to the <code>Pad</code> component. In <code>App.js</code>:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token operator">&lt;</span>Pads pos<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>pos<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
</code></pre>
      </div>
<p>Then in <code>Pads.js</code> add the pos to pass down to <code>Pad</code>:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">return</span> <span class="token operator">&lt;</span>Pad 
        key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span> 
        rowIndex<span class="token operator">=</span><span class="token punctuation">{</span>rowIndex<span class="token punctuation">}</span> 
        id<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span> 
        state<span class="token operator">=</span><span class="token punctuation">{</span>pad<span class="token punctuation">}</span>
        pos<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>pos<span class="token punctuation">}</span>
        toggleActive<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>toggleActive<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
</code></pre>
      </div>
<p>Finally in <code>Pad</code> we can add another class called <code>playing</code> depending on whether <code>pos</code> corresponds to the pad's position in the grid:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token operator">&lt;</span>div 
    className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">"pad "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>state <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">'active'</span> <span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>pos <span class="token operator">===</span> props<span class="token punctuation">.</span>id <span class="token operator">?</span> <span class="token string">' playing'</span> <span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> props<span class="token punctuation">.</span><span class="token function">toggleActive</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>rowIndex<span class="token punctuation">,</span> props<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
</code></pre>
      </div>
<p>And add that class to <code>App.css</code>, as well as a state for when a pad is both active and playing:</p>
<div class="gatsby-highlight">
      <pre class="language-css"><code><span class="token selector">.pad.playing</span> <span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> silver<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.pad.active.playing</span> <span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> lime<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>Now when you click Play the current column will be highlighted.</p>
<p>Our next task is to check, each time <code>pos</code> advances, whether or not any pads at that position in the row are active. We can add a method <code>checkPad()</code> and call it in <code>tick()</code>. Put this at the end of the <code>tick</code> method:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">checkPad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<p>Now we're ready to create the function:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token function">checkPad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>But here we encounter a problem. Ideally we'd like to iterate over the <code>pads</code> state to check which pads are active - but we've put the <code>pads</code> state in a child component (<code>Pads</code>), so we can't access it from its parent. The solution is to follow the React best practices and <a href="https://facebook.github.io/react/docs/lifting-state-up.html">lift the state up</a>. This means shifting the "source of truth", when it comes to pads, from the <code>Pads</code> component to its parent, <code>App</code>. So remove the entire <code>pads</code> state from the <code>Pads</code> component, and add it to the <code>App</code> state:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
    pads<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    playing<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    pos<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    bpm<span class="token punctuation">:</span> <span class="token number">220</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>We then pass it back down to <code>Pads</code>:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token operator">&lt;</span>Pads pos<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>pos<span class="token punctuation">}</span> pads<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>pads<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
</code></pre>
      </div>
<p>Since <code>Pads</code> no longer has state we can make it a stateless functional component by removing the class declaration and replacing it with </p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">Pads</span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
</code></pre>
      </div>
<p>We also need to remove the <code>render()</code> method and the <code>return</code> statement, and replace all references to <code>this.props</code> with <code>props</code>. See the <a href="https://github.com/unlikenesses/react-sequencer/blob/master/src/components/Pads.js">source on Github</a> if this isn't clear.</p>
<p>Now in <code>Pads</code> change</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>pads<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>row<span class="token punctuation">,</span> rowIndex<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
</code></pre>
      </div>
<p>to</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token punctuation">{</span>props<span class="token punctuation">.</span>pads<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>row<span class="token punctuation">,</span> rowIndex<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
</code></pre>
      </div>
<p>Now we've moved the <code>pads</code> state the <code>toggleActive</code> method in <code>Pads</code> won't work. Take it and move it to <code>App</code>, then add</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>toggleActive <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>toggleActive<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<p>to <code>App</code>'s constructor. We then need to pass it back down as a prop to <code>Pads</code>:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token operator">&lt;</span>Pads pos<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>pos<span class="token punctuation">}</span> pads<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>pads<span class="token punctuation">}</span> toggleActive<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>toggleActive<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
</code></pre>
      </div>
<p>and modify <code>Pads</code> to call it:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">return</span> <span class="token operator">&lt;</span>Pad 
    key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span> 
    rowIndex<span class="token operator">=</span><span class="token punctuation">{</span>rowIndex<span class="token punctuation">}</span> 
    id<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span> 
    state<span class="token operator">=</span><span class="token punctuation">{</span>pad<span class="token punctuation">}</span>
    pos<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>pos<span class="token punctuation">}</span>
    toggleActive<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> props<span class="token punctuation">.</span><span class="token function">toggleActive</span><span class="token punctuation">(</span>rowIndex<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
</code></pre>
      </div>
<p>Now everything should work as it did before, except now we have access to <code>pads</code> in our root component. This means we can now write our <code>checkPad</code> method, which simply loops through the <code>pads</code> state and calls a new method, <code>playSound</code>, if the <code>pad</code> at the current <code>pos</code> is active:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token function">checkPad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>pads<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>row<span class="token punctuation">,</span> rowIndex<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        row<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>pad<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>pos <span class="token operator">&amp;&amp;</span> pad <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">playSound</span><span class="token punctuation">(</span>rowIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>For simplicity's sake we're going to use the audio API to play a note depending on the row's position in the grid. Of course we could also play a sample instead. Let's set some frequencies in our constructor (<a href="https://en.wikipedia.org/wiki/Piano_key_frequencies">source</a>):</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>frequencies <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">261.63</span><span class="token punctuation">,</span> <span class="token number">277.18</span><span class="token punctuation">,</span> <span class="token number">293.66</span><span class="token punctuation">,</span> <span class="token number">311.13</span><span class="token punctuation">,</span> <span class="token number">329.63</span><span class="token punctuation">,</span> <span class="token number">349.23</span><span class="token punctuation">,</span> <span class="token number">369.99</span><span class="token punctuation">,</span> <span class="token number">392</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<p>Also in the <code>constructor</code> we'll initialise the audio API (since this tutorial isn't focused on the API I won't go into details here):</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>audioCx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>AudioContext <span class="token operator">||</span> window<span class="token punctuation">.</span>webkitAudioContext<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>gain <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>audioCx<span class="token punctuation">.</span><span class="token function">createGain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>gain<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>audioCx<span class="token punctuation">.</span>destination<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>gain<span class="token punctuation">.</span>gain<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<p>Then our <code>playSound</code> method, which has already been given the <code>rowIndex</code>, grabs the appropriate frequency from the <code>frequencies</code> array, and plays a sine wave at that frequency:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token function">playSound</span><span class="token punctuation">(</span>rowIndex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> freq <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>frequencies<span class="token punctuation">[</span>rowIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> node <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>audioCx<span class="token punctuation">.</span><span class="token function">createOscillator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> currentTime <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>audioCx<span class="token punctuation">.</span>currentTime<span class="token punctuation">;</span>
    node<span class="token punctuation">.</span>frequency<span class="token punctuation">.</span>value <span class="token operator">=</span> freq<span class="token punctuation">;</span>
    node<span class="token punctuation">.</span>detune<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    node<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'sine'</span><span class="token punctuation">;</span>
    node<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>gain<span class="token punctuation">)</span><span class="token punctuation">;</span>
    node<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span>currentTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
    node<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span>currentTime <span class="token operator">+</span> <span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>There's a couple more things to do: add a control for the BPM, and make the whole thing a bit prettier.</p>
<p>The BPM control is a range <code>input</code>, which goes under the <code>button</code> tag in the <code>Controls</code> component:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"bpm"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>label<span class="token operator">></span>BPM<span class="token punctuation">:</span><span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span>
    <span class="token operator">&lt;</span>input 
        type<span class="token operator">=</span><span class="token string">"range"</span> 
        id<span class="token operator">=</span><span class="token string">"bpm"</span> 
        min<span class="token operator">=</span><span class="token string">"1"</span> 
        max<span class="token operator">=</span><span class="token string">"420"</span> 
        step<span class="token operator">=</span><span class="token string">"1"</span> 
        defaultValue<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>bpm<span class="token punctuation">}</span> 
        onChange<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>output<span class="token operator">></span>
        <span class="token punctuation">{</span> props<span class="token punctuation">.</span>bpm <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>output<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
</code></pre>
      </div>
<p>It takes two properties passed from <code>App</code>: <code>bpm</code> and <code>handleChange</code>. So back in <code>App</code>, first add these as props to the <code>render</code> method:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token operator">&lt;</span>Controls 
    bpm<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>bpm<span class="token punctuation">}</span> 
    handleChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>changeBpm<span class="token punctuation">}</span> 
    playing<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>playing<span class="token punctuation">}</span> 
    togglePlaying<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>togglePlaying<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
</code></pre>
      </div>
<p>Then add the <code>changeBpm</code> method:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token function">changeBpm</span><span class="token punctuation">(</span>bpm<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> bpm<span class="token punctuation">:</span> bpm<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>playing<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">clearInterval</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timerId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<p>This sets the new <code>bpm</code> in state, and if we're already playing, stop the timer (since it's tied to the previous <code>bpm</code>) and restart it.</p>
<p>That's it for the functionality. All that remains is to add some CSS polish - if you want, head over to <a href="https://raw.githubusercontent.com/unlikenesses/react-sequencer/master/src/App.css">my raw CSS file</a> and copy it into <code>App.css</code>. </p></div></div><div class="related" data-reactid="33"><ul class="related-posts" data-reactid="34"><li data-reactid="35"><h3 data-reactid="36"><!-- react-text: 37 -->Previous<!-- /react-text --><!-- react-text: 38 -->:<!-- /react-text --><!-- react-text: 39 --> <!-- /react-text --><a href="/2017-06-29-vue-loader-modals/" data-reactid="40"><!-- react-text: 41 -->vue loader modals<!-- /react-text --><!-- react-text: 42 --> <!-- /react-text --><small data-reactid="43">29 June, 2017</small></a></h3></li><li data-reactid="44"><h3 data-reactid="45"><!-- react-text: 46 -->Next<!-- /react-text --><!-- react-text: 47 -->:<!-- /react-text --><!-- react-text: 48 --> <!-- /react-text --><a href="/2017-07-14-react-sequencer-redux/" data-reactid="49"><!-- react-text: 50 -->react sequencer redux<!-- /react-text --><!-- react-text: 51 --> <!-- /react-text --><small data-reactid="52">14 July, 2017</small></a></h3></li></ul></div></div></div></div></div></body></html>