<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/commons.3e58207322efed7d1fc2.css">code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}*{box-sizing:border-box}body,html{margin:0;padding:0}html{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;line-height:1.5}@media (min-width:38em){html{font-size:20px}}body{color:#515151;background-color:#fff;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}a{color:#268bd2;text-decoration:none}a strong{color:inherit}a:focus,a:hover{text-decoration:underline}h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;font-weight:700;line-height:1.25;color:#313131;text-rendering:optimizeLegibility}h1{font-size:2rem}h2{margin-top:1rem;font-size:1.5rem}h3{margin-top:1.5rem;font-size:1.25rem}h4,h5,h6{margin-top:1rem;font-size:1rem}p{margin-top:0;margin-bottom:1rem}strong{color:#303030}dl,ol,ul{margin-top:0;margin-bottom:1rem}dt{font-weight:700}dd{margin-bottom:.5rem}hr{position:relative;margin:1.5rem 0;border:0;border-top:1px solid #eee;border-bottom:1px solid #fff}abbr{font-size:85%;font-weight:700;color:#555;text-transform:uppercase}abbr[title]{cursor:help;border-bottom:1px dotted #e5e5e5}code,pre{font-family:Menlo,Monaco,Courier New,monospace}code{padding:.25em .5em;font-size:85%;color:#bf616a;border-radius:3px}code,pre{background-color:#f9f9f9}pre{display:block;margin-top:0;margin-bottom:1rem;padding:1rem;font-size:.8rem;line-height:1.4;white-space:pre;white-space:pre-wrap;word-break:break-all;word-wrap:break-word}pre code{padding:0;font-size:100%;color:inherit;background-color:transparent}.highlight{margin-bottom:1rem;border-radius:4px}.highlight pre{margin-bottom:0}.gist .gist-file{font-family:Menlo,Monaco,Courier New,monospace!important}.gist .markdown-body{padding:15px}.gist pre{padding:0;background-color:transparent}.gist .gist-file .gist-data{font-size:.8rem!important;line-height:1.4}.gist code{padding:0;color:inherit;background-color:transparent;border-radius:0}blockquote{padding:.5rem 1rem;margin:.8rem 0;color:#7a7a7a;border-left:.25rem solid #e5e5e5}blockquote p:last-child{margin-bottom:0}@media (min-width:30em){blockquote{padding-right:5rem;padding-left:1.25rem}}img{display:block;max-width:100%;margin:0 0 1rem;border-radius:5px}table{margin-bottom:1rem;width:100%;border:1px solid #e5e5e5;border-collapse:collapse}td,th{padding:.25rem .5rem;border:1px solid #e5e5e5}tbody tr:nth-child(odd) td,tbody tr:nth-child(odd) th{background-color:#f9f9f9}.lead{font-size:1.25rem;font-weight:300}.message{margin-bottom:1rem;padding:1rem;color:#717171;background-color:#f9f9f9}.container{max-width:38rem;padding-left:1rem;padding-right:1rem;margin-left:auto;margin-right:auto}.masthead{padding-top:1rem;padding-bottom:1rem;margin-bottom:3rem}.masthead-title{margin-top:0;margin-bottom:0;color:#505050}.masthead-title a{color:#505050}.masthead-title small{font-size:75%;font-weight:400;color:silver;letter-spacing:0}.page,.post{margin-bottom:4em}.page-title,.post-title,.post-title a{color:#303030}.page-title,.post-title{margin-top:0}.post-date{display:block;margin-top:-.5rem;margin-bottom:1rem;color:#9a9a9a}.related{padding-top:2rem;padding-bottom:2rem;border-top:1px solid #eee}.related-posts{padding-left:0;list-style:none}.related-posts h3{margin-top:0}.related-posts li small{font-size:75%;color:#999}.related-posts li a:hover{color:#268bd2;text-decoration:none}.related-posts li a:hover small{color:inherit}.pagination{overflow:hidden;margin-left:-1rem;margin-right:-1rem;font-family:PT Sans,Helvetica,Arial,sans-serif;color:#ccc;text-align:center}.pagination-item{display:block;padding:1rem;border:1px solid #eee}.pagination-item:first-child{margin-bottom:-1px}a.pagination-item:hover{background-color:#f5f5f5}@media (min-width:30em){.pagination{margin:3rem 0}.pagination-item{float:left;width:50%}.pagination-item:first-child{margin-bottom:0;border-top-left-radius:4px;border-bottom-left-radius:4px}.pagination-item:last-child{margin-left:-1px;border-top-right-radius:4px;border-bottom-right-radius:4px}}html{font-family:"Noto Serif",Georgia,serif}@media (min-width:48em){html{font-size:16px}}@media (min-width:58em){html{font-size:17px;line-height:1.75}}.sidebar{font-family:Roboto Slab,Helvetica,Arial,sans-serif;text-align:center;padding:2rem 1rem;color:hsla(0,0%,100%,.5);background-color:#202020}@media (min-width:48em){.sidebar{position:fixed;top:0;left:0;bottom:0;width:18rem;text-align:left}}.sidebar a{color:#fff}.sidebar-about h1{color:#fff;margin-top:0;font-size:2.25rem}.sidebar-nav{margin-bottom:1rem}.sidebar-nav-item{display:block;line-height:1.75}a.sidebar-nav-item:focus,a.sidebar-nav-item:hover{text-decoration:underline}.sidebar-nav-item.active{font-weight:700}@media (min-width:48em){.sidebar-sticky{position:absolute;right:1rem;bottom:1rem;left:1rem}}.content{padding-top:4rem;padding-bottom:4rem}@media (min-width:48em){.content{max-width:38rem;margin-left:20rem;margin-right:2rem}}@media (min-width:64em){.content{margin-left:22rem;margin-right:4rem}}@media (min-width:48em){.layout-reverse .sidebar{left:auto;right:0}.layout-reverse .content{margin-left:2rem;margin-right:20rem}}@media (min-width:64em){.layout-reverse .content{margin-left:4rem;margin-right:22rem}}.page-title,.post-title,h2,h3,h4{font-family:Roboto Slab,Helvetica,Arial,sans-serif;text-transform:capitalize}.post-title{font-size:2rem}.theme-base-08 .sidebar{background-color:#ac4142}.theme-base-08 .content a,.theme-base-08 .related-posts li a:hover{color:#ac4142}.theme-base-09 .sidebar{background-color:#d28445}.theme-base-09 .content a,.theme-base-09 .related-posts li a:hover{color:#d28445}.theme-base-0a .sidebar{background-color:#f4bf75}.theme-base-0a .content a,.theme-base-0a .related-posts li a:hover{color:#f4bf75}.theme-base-0b .sidebar{background-color:#90a959}.theme-base-0b .content a,.theme-base-0b .related-posts li a:hover{color:#90a959}.theme-base-0c .sidebar{background-color:#75b5aa}.theme-base-0c .content a,.theme-base-0c .related-posts li a:hover{color:#75b5aa}.theme-base-0d .sidebar{background-color:#6a9fb5}.theme-base-0d .content a,.theme-base-0d .related-posts li a:hover{color:#6a9fb5}.theme-base-0e .sidebar{background-color:#aa759f}.theme-base-0e .content a,.theme-base-0e .related-posts li a:hover{color:#aa759f}.theme-base-0f .sidebar{background-color:#8f5536}.theme-base-0f .content a,.theme-base-0f .related-posts li a:hover{color:#8f5536}#mc_embed_signup form{display:block;position:relative;text-align:left;padding:10px 0 10px 3%}#mc_embed_signup h2{font-weight:700;padding:0;margin:15px 0;font-size:1.4em}#mc_embed_signup input{border:1px solid #999;-webkit-appearance:none}#mc_embed_signup input[type=checkbox]{-webkit-appearance:checkbox}#mc_embed_signup input[type=radio]{-webkit-appearance:radio}#mc_embed_signup input:focus{border-color:#333}#mc_embed_signup .button{clear:both;background-color:#aaa;border:0;border-radius:4px;letter-spacing:.03em;color:#fff;cursor:pointer;display:inline-block;font-size:15px;height:32px;line-height:32px;margin:0 5px 10px 0;padding:0;text-align:center;text-decoration:none;vertical-align:top;white-space:nowrap;width:auto;-webkit-transition:all .23s ease-in-out 0s;transition:all .23s ease-in-out 0s}#mc_embed_signup .button:hover{background-color:#777}#mc_embed_signup .small-meta{font-size:11px}#mc_embed_signup .nowrap{white-space:nowrap}#mc_embed_signup .clear{clear:none;display:inline}#mc_embed_signup label{display:block;font-size:16px;padding-bottom:10px;font-weight:700}#mc_embed_signup input.email{font-family:Open Sans,Helvetica Neue,Arial,Helvetica,Verdana,sans-serif;font-size:15px;display:block;padding:0 .4em;margin:0 4% 10px 0;min-height:32px;width:58%;min-width:130px;border-radius:3px}#mc_embed_signup input.button{display:block;width:35%;margin:0 0 10px;min-width:90px}#mc_embed_signup div#mce-responses{float:left;top:-1.4em;padding:0 .5em;overflow:hidden;width:90%;margin:0 5%;clear:both}#mc_embed_signup div.response{margin:1em 0;padding:1em .5em .5em 0;font-weight:700;float:left;top:-1.5em;z-index:1;width:80%}#mc_embed_signup #mce-error-response{display:none}#mc_embed_signup #mce-success-response{color:#529214;display:none}#mc_embed_signup label.error{display:block;float:none;width:auto;margin-left:1.05em;text-align:left;padding:.5em 0}#mc_embed_signup{clear:left;font-size:14px}#mc_embed_signup input{border:1px solid hsla(0,0%,100%,.5)}#mc_embed_signup input.email{width:100%;font-family:Roboto Slab,Helvetica,Arial,sans-serif}#mc_embed_signup form{padding-left:0}#mc_embed_signup input.button{width:50%}#mc_embed_signup .button{background-color:hsla(0,0%,100%,.5);font-family:Roboto Slab,Helvetica,Arial,sans-serif;color:#ac4142}#mc_embed_signup .button:hover{background-color:#fff}code[class*=language-],pre[class*=language-]{font-family:Menlo,Monaco,Courier New,monospace;font-size:14px}</style><meta name="generator" content="Gatsby 2.15.36"/><link href="https://fonts.googleapis.com/css?family=Roboto+Slab:700|Noto+Serif:400,400i,700,700i" rel="stylesheet"/><link as="script" rel="preload" href="/app-8fd481ddfb0f3dd8838f.js"/><link as="script" rel="preload" href="/component---src-templates-post-js-4505edc6c7cc65e9d77e.js"/><link as="script" rel="preload" href="/commons-a8678319dbc46017a25a.js"/><link as="script" rel="preload" href="/webpack-runtime-85745c3f6b306aa14381.js"/><link as="fetch" rel="preload" href="/page-data\2018-02-20-http-components\page-data.json" crossorigin="anonymous"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="theme-base-08"><div class="sidebar"><div class="container sidebar-sticky"><div class="sidebar-about"><h1><a href="/">Unlikenesses</a></h1><p class="lead"></p></div><nav class="sidebar-nav"><a class="sidebar-nav-item" href="/">Blog</a><a class="sidebar-nav-item" href="/about/">About</a><a class="sidebar-nav-item" href="/experiments/">Experiments</a><a class="sidebar-nav-item" href="https://twitter.com/unlikenesses" target="_blank" rel="noopener noreferrer">Twitter</a><a class="sidebar-nav-item" href="https://github.com/unlikenesses" target="_blank" rel="noopener noreferrer">Github</a><a class="sidebar-nav-item" href="http://codepen.io/unlikenesses/" target="_blank" rel="noopener noreferrer">Codepen</a></nav><div><a class="twitter-follow-button" href="https://twitter.com/unlikenesses" target="_blank" rel="noopener noreferrer">Follow @unlikenesses</a></div><p>Â© <!-- -->2019</p></div></div><div class="content container"><div class="post"><h1 class="post-title">Why an HTTP component?</h1><span class="post-date">20 February, 2018</span><div><p>Patrick Louys <a href="https://github.com/PatrickLouys/no-framework-tutorial/blob/master/04-http.md">recommends</a> using an HTTP interface for dealing with web requests and responses, rather than relying on PHP <a href="http://php.net/manual/en/language.variables.superglobals.php">superglobals</a>. I want to look into why this is, i.e. why packages like <a href="https://github.com/PatrickLouys/http">his</a> (and <a href="https://github.com/symfony/http-foundation">the</a> <a href="https://github.com/nette/http">others</a> <a href="https://github.com/auraphp/Aura.Web">he</a> <a href="https://github.com/fruux/sabre-http">lists</a>) exist.</p>
<p>Let's consider an HTTP request. The PHP global variable for a <code>GET</code> request is <code>$_GET</code>. So if we have a URL like <code>http://www.unlikenesses.com/?post=32</code>, and we run </p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token keyword">echo</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'post'</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre></div>
<p>it will output <code>32</code>. Using the Symfony HTTP component, to get the same result we would run</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token keyword">echo</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">query</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'post'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>With Patrick Louys's component, it's </p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token keyword">echo</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'post'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Of course, before calling these methods we need to instantiate the request classes, and in both these packages this simply means passing the PHP superglobals to a constructor method; in other words, the request class is basically a wrapper for these globals. This is how it looks in Patrick Louys's package:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token variable">$request</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token punctuation">\</span>Http<span class="token punctuation">\</span>HttpRequest</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">,</span> <span class="token variable">$_POST</span><span class="token punctuation">,</span> <span class="token variable">$_COOKIE</span><span class="token punctuation">,</span> <span class="token variable">$_FILES</span><span class="token punctuation">,</span> <span class="token variable">$_SERVER</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>and in Symfony's package (according to the <a href="https://symfony.com/doc/current/components/http_foundation.html">docs</a>):</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token variable">$request</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Request</span><span class="token punctuation">(</span>
    <span class="token variable">$_GET</span><span class="token punctuation">,</span>
    <span class="token variable">$_POST</span><span class="token punctuation">,</span>
    <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token variable">$_COOKIE</span><span class="token punctuation">,</span>
    <span class="token variable">$_FILES</span><span class="token punctuation">,</span>
    <span class="token variable">$_SERVER</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>The classes then provide methods that allow us to access the globals. Of course, depending on the package, there may be a raft of other helper methods to ease working with requests.</p>
<p>How about response objects? They usually contain three pieces of information: the content of the response, the status code (<code>200</code>, <code>404</code>, etc), and the HTTP headers (e.g. <code>text/html</code>). These packages will contain setter methods to define this information, which can then either be retrieved by getter methods and manually output (as with Patrick Louys's package) or output with <a href="https://symfony.com/doc/current/components/http_foundation.html#sending-the-response">helper methods</a> like <code>send</code> (as with Symfony's package). Such helper methods are basically wrappers around the PHP <code>header</code> and <code>echo</code> commands.</p>
<p>So that's what the packages do. Why are they necessary, or desirable? In the Symfony guide to creating a framework from scratch, a number of problems <a href="https://symfony.com/doc/current/create_framework/http_foundation.html">are raised</a> with using the <code>$_GET</code> superglobal. First, if the given variable doesn't exist, you'll get a PHP warning. This is fixed in the above packages by having their <code>get</code> methods return <code>null</code> (or a given default) if the requested variable name doesn't exist in their <code>GET</code> arrays. E.g., <a href="https://github.com/symfony/http-foundation/blob/8f68c79bce646f965f38f4d892f72128f8a030d8/Request.php#L685-L714">these lines</a> from the Symfony package:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token variable">$key</span><span class="token punctuation">,</span> <span class="token variable">$default</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$this</span> <span class="token operator">!==</span> <span class="token variable">$result</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">attributes</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">get</span><span class="token punctuation">(</span><span class="token variable">$key</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$result</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$this</span> <span class="token operator">!==</span> <span class="token variable">$result</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">query</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">get</span><span class="token punctuation">(</span><span class="token variable">$key</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$result</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$this</span> <span class="token operator">!==</span> <span class="token variable">$result</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">request</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">get</span><span class="token punctuation">(</span><span class="token variable">$key</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$result</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token variable">$default</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Next, the Symfony doc points out that blindly accepting variables taking from (e.g.) <code>$_GET</code> leaves your app open to XSS (Cross-Site Scripting). Its short-term fix (i.e. before getting around to using the HTTP package) is this:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token function">header</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Content-Type: text/html; charset=utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">printf</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Hello %s'</span><span class="token punctuation">,</span> <span class="token function">htmlspecialchars</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">,</span> <span class="token constant">ENT_QUOTES</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'UTF-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>How does this combat XSS? For a start, it uses <a href="http://php.net/manual/en/function.htmlspecialchars.php">htmlspecialchars</a> to convert any HTML characters (the presence of which might indicate that code is being injected via the query string) to HTML entities (e.g. <code>&#x3C;</code> to <code>&#x26;lt;</code>). The <code>header</code> statement sets encoding to UTF-8 (Owasp <a href="https://www.owasp.org/index.php/PHP_Security_Cheat_Sheet#Use_UTF-8_unless_necessary">notes</a> that "Many new attack vectors rely on encoding bypassing" and recommends to "Use UTF-8 as your database and application charset"). As of PHP 5.4 UTF-8 is default but I guess this allows for security on earlier PHP environments.</p>
<p>How are these issues handled in Symfony's HTTP package? Well, actually it doesn't automatically escape the input for you:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token variable">$response</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Hello %s'</span><span class="token punctuation">,</span> <span class="token function">htmlspecialchars</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">,</span> <span class="token constant">ENT_QUOTES</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'UTF-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>But, as the docs say, the <code>send</code> method "first outputs the HTTP headers followed by the content". In any case, since "the charset of the Response object defaults to UTF-8" there is no need to specify it in the <code>Content-Type</code>. </p>
<p>The last benefit mentioned is improved testability. Since these HTTP packages are basically representations of HTTP messages in the form of PHP objects, they can be more easily instantiated, manipulated, mocked, and passed between methods and classes. If we want to test a class that requires a <code>GET</code> variable we can rewrite the class to accept the <code>Request</code> via dependency injection, and in the test mock the <code>Request</code> object and pass it to the class. It's a commonly-held principle of testing that the isolation of functionality allowed by dependency injection increases the testability of your code.</p>
<p>The Symfony HttpFoundation component is used on (of course) Symfony, Drupal and Laravel, amongst other frameworks.</p></div></div><div class="related"><ul class="related-posts"><li><h3>Previous<!-- -->:<!-- --> <a href="/2017-11-06-migrating-blog-to-gatsby/">Migrating the blog from Jekyll to Gatsby<!-- --> <small>10 January, 2018</small></a></h3></li><li><h3>Next<!-- -->:<!-- --> <a href="/2018-03-24-laracasts-lessons/">Lessons from Laracasts, Part 1<!-- --> <small>24 March, 2018</small></a></h3></li></ul></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2018-02-20-http-components/";window.webpackCompilationHash="b0f24b451a3b2ebddb5e";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-8fd481ddfb0f3dd8838f.js"],"component---src-templates-index-js":["/component---src-templates-index-js-37ce12bb80a9f7262bef.js"],"component---src-templates-post-js":["/component---src-templates-post-js-4505edc6c7cc65e9d77e.js"],"component---src-templates-page-js":["/component---src-templates-page-js-dd9a065be189ea504205.js"],"component---src-pages-404-js":["/component---src-pages-404-js-7ef4343af97b4bd9bf54.js"]};/*]]>*/</script><script src="/webpack-runtime-85745c3f6b306aa14381.js" async=""></script><script src="/commons-a8678319dbc46017a25a.js" async=""></script><script src="/component---src-templates-post-js-4505edc6c7cc65e9d77e.js" async=""></script><script src="/app-8fd481ddfb0f3dd8838f.js" async=""></script></body></html>